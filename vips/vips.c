// Code generated by github.com/cshum/vipsgen. DO NOT EDIT.

#include "vips.h"
#include <unistd.h>

// Prerequisite functions to build, get outputs and cleanup a vips operation

static int set_int_param(VipsOperation *operation, const char *name, int value) {
    if (value != 0) { return vips_object_set(VIPS_OBJECT(operation), name, value, NULL); }
    return 0;
}

static int set_bool_param(VipsOperation *operation, const char *name, gboolean value) {
    if (value) { return vips_object_set(VIPS_OBJECT(operation), name, value, NULL); }
    return 0;
}

static int set_double_param(VipsOperation *operation, const char *name, double value) {
    if (value != 0.0) { return vips_object_set(VIPS_OBJECT(operation), name, value, NULL); }
    return 0;
}

static int set_guint64_param(VipsOperation *operation, const char *name, guint64 value) {
    if (value != 0) { return vips_object_set(VIPS_OBJECT(operation), name, value, NULL); }
    return 0;
}

static int set_string_param(VipsOperation *operation, const char *name, const char *value) {
    if (value != NULL && strlen(value) > 0) { return vips_object_set(VIPS_OBJECT(operation), name, value, NULL); }
    return 0;
}

static int set_image_param(VipsOperation *operation, const char *name, VipsImage *value) {
    if (value != NULL) { return vips_object_set(VIPS_OBJECT(operation), name, value, NULL); }
    return 0;
}

static int set_array_double_param(VipsOperation *operation, const char *name, VipsArrayDouble *value) {
    if (value != NULL) { return vips_object_set(VIPS_OBJECT(operation), name, value, NULL); }
    return 0;
}

static int set_array_int_param(VipsOperation *operation, const char *name, VipsArrayInt *value) {
    if (value != NULL) { return vips_object_set(VIPS_OBJECT(operation), name, value, NULL); }
    return 0;
}

static int set_array_image_param(VipsOperation *operation, const char *name, VipsArrayImage *value) {
    if (value != NULL) { return vips_object_set(VIPS_OBJECT(operation), name, value, NULL); }
    return 0;
}

static int set_interpolate_param(VipsOperation *operation, const char *name, VipsInterpolate *value) {
    if (value != NULL) { return vips_object_set(VIPS_OBJECT(operation), name, value, NULL); }
    return 0;
}

static int set_source_param(VipsOperation *operation, const char *name, VipsSource *value) {
    if (value != NULL) { return vips_object_set(VIPS_OBJECT(operation), name, value, NULL); }
    return 0;
}

static int vipsgen_operation_execute(VipsOperation **operation, ...) {
    va_list ap;
    if (vips_cache_operation_buildp(operation)) {
        vips_object_unref_outputs(VIPS_OBJECT(*operation));
        g_object_unref(*operation);
        return 1;
    }
    va_start(ap, operation);
    const char *name;
    while ((name = va_arg(ap, const char *)) != NULL) {
        void *value = va_arg(ap, void *);
        if (value != NULL) {
            g_object_get(VIPS_OBJECT(*operation), name, value, NULL);
        }
    }
    va_end(ap);
    vips_object_unref_outputs(VIPS_OBJECT(*operation));
    g_object_unref(*operation);
    return 0;
}


int vipsgen_system(const char* cmd_format) {
    return vips_system(cmd_format, NULL);
}

int vipsgen_system_with_options(const char* cmd_format, VipsImage** in, int in_n, const char* out_format, const char* in_format) {
    VipsOperation *operation = vips_operation_new("system");
    if (!operation) return 1;
    VipsArrayImage *in_array = NULL;
    if (in != NULL && in_n > 0) { in_array = vips_array_image_new(in, in_n); }
    if (
        vips_object_set(VIPS_OBJECT(operation), "cmd_format", cmd_format, NULL) ||
        set_array_image_param(operation, "in", in_array) ||
        set_string_param(operation, "out_format", out_format) ||
        set_string_param(operation, "in_format", in_format)
    ) {
        g_object_unref(operation);
        if (in_array != NULL) { vips_area_unref(VIPS_AREA(in_array)); }
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, NULL);
    if (in_array != NULL) { vips_area_unref(VIPS_AREA(in_array)); }
    return result;
}

int vipsgen_add(VipsImage* left, VipsImage* right, VipsImage** out) {
    return vips_add(left, right, out, NULL);
}

int vipsgen_minpair(VipsImage* left, VipsImage* right, VipsImage** out) {
    return vips_minpair(left, right, out, NULL);
}

int vipsgen_maxpair(VipsImage* left, VipsImage* right, VipsImage** out) {
    return vips_maxpair(left, right, out, NULL);
}

int vipsgen_subtract(VipsImage* left, VipsImage* right, VipsImage** out) {
    return vips_subtract(left, right, out, NULL);
}

int vipsgen_multiply(VipsImage* left, VipsImage* right, VipsImage** out) {
    return vips_multiply(left, right, out, NULL);
}

int vipsgen_divide(VipsImage* left, VipsImage* right, VipsImage** out) {
    return vips_divide(left, right, out, NULL);
}

int vipsgen_relational(VipsImage* left, VipsImage* right, VipsImage** out, VipsOperationRelational relational) {
    return vips_relational(left, right, out, relational, NULL);
}

int vipsgen_remainder(VipsImage* left, VipsImage* right, VipsImage** out) {
    return vips_remainder(left, right, out, NULL);
}

int vipsgen_boolean(VipsImage* left, VipsImage* right, VipsImage** out, VipsOperationBoolean boolean) {
    return vips_boolean(left, right, out, boolean, NULL);
}

int vipsgen_math2(VipsImage* left, VipsImage* right, VipsImage** out, VipsOperationMath2 math2) {
    return vips_math2(left, right, out, math2, NULL);
}

int vipsgen_complex2(VipsImage* left, VipsImage* right, VipsImage** out, VipsOperationComplex2 cmplx) {
    return vips_complex2(left, right, out, cmplx, NULL);
}

int vipsgen_complexform(VipsImage* left, VipsImage* right, VipsImage** out) {
    return vips_complexform(left, right, out, NULL);
}

int vipsgen_clamp(VipsImage* in, VipsImage** out) {
    return vips_clamp(in, out, NULL);
}

int vipsgen_clamp_with_options(VipsImage* in, VipsImage** out, double min, double max) {
    VipsOperation *operation = vips_operation_new("clamp");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        set_double_param(operation, "min", min) ||
        set_double_param(operation, "max", max)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_invert(VipsImage* in, VipsImage** out) {
    return vips_invert(in, out, NULL);
}

int vipsgen_linear(VipsImage* in, VipsImage** out, double* a, double* b, int n) {
    return vips_linear(in, out, a, b, n, NULL);
}

int vipsgen_linear_with_options(VipsImage* in, VipsImage** out, double* a, double* b, int n, gboolean uchar) {
    VipsOperation *operation = vips_operation_new("linear");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "a", a, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "b", b, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "n", n, NULL) ||
        set_bool_param(operation, "uchar", uchar)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_math(VipsImage* in, VipsImage** out, VipsOperationMath math) {
    return vips_math(in, out, math, NULL);
}

int vipsgen_abs(VipsImage* in, VipsImage** out) {
    return vips_abs(in, out, NULL);
}

int vipsgen_sign(VipsImage* in, VipsImage** out) {
    return vips_sign(in, out, NULL);
}

int vipsgen_round(VipsImage* in, VipsImage** out, VipsOperationRound round) {
    return vips_round(in, out, round, NULL);
}

int vipsgen_relational_const(VipsImage* in, VipsImage** out, VipsOperationRelational relational, double* c, int n) {
    return vips_relational_const(in, out, relational, c, n, NULL);
}

int vipsgen_remainder_const(VipsImage* in, VipsImage** out, double* c, int n) {
    return vips_remainder_const(in, out, c, n, NULL);
}

int vipsgen_boolean_const(VipsImage* in, VipsImage** out, VipsOperationBoolean boolean, double* c, int n) {
    return vips_boolean_const(in, out, boolean, c, n, NULL);
}

int vipsgen_math2_const(VipsImage* in, VipsImage** out, VipsOperationMath2 math2, double* c, int n) {
    return vips_math2_const(in, out, math2, c, n, NULL);
}

int vipsgen_complex(VipsImage* in, VipsImage** out, VipsOperationComplex cmplx) {
    return vips_complex(in, out, cmplx, NULL);
}

int vipsgen_complexget(VipsImage* in, VipsImage** out, VipsOperationComplexget get) {
    return vips_complexget(in, out, get, NULL);
}

int vipsgen_sum(VipsImage** in, VipsImage** out, int n) {
    return vips_sum(in, out, n, NULL);
}

int vipsgen_avg(VipsImage* in, double* out) {
    return vips_avg(in, out, NULL);
}

int vipsgen_min(VipsImage* in, double* out) {
    return vips_min(in, out, NULL);
}

int vipsgen_min_with_options(VipsImage* in, double* out, int size) {
    VipsOperation *operation = vips_operation_new("min");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        set_int_param(operation, "size", size)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_max(VipsImage* in, double* out) {
    return vips_max(in, out, NULL);
}

int vipsgen_max_with_options(VipsImage* in, double* out, int size) {
    VipsOperation *operation = vips_operation_new("max");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        set_int_param(operation, "size", size)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_deviate(VipsImage* in, double* out) {
    return vips_deviate(in, out, NULL);
}

int vipsgen_stats(VipsImage* in, VipsImage** out) {
    return vips_stats(in, out, NULL);
}

int vipsgen_hist_find(VipsImage* in, VipsImage** out) {
    return vips_hist_find(in, out, NULL);
}

int vipsgen_hist_find_with_options(VipsImage* in, VipsImage** out, int band) {
    VipsOperation *operation = vips_operation_new("hist_find");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        set_int_param(operation, "band", band)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_hist_find_ndim(VipsImage* in, VipsImage** out) {
    return vips_hist_find_ndim(in, out, NULL);
}

int vipsgen_hist_find_ndim_with_options(VipsImage* in, VipsImage** out, int bins) {
    VipsOperation *operation = vips_operation_new("hist_find_ndim");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        set_int_param(operation, "bins", bins)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_hist_find_indexed(VipsImage* in, VipsImage* index, VipsImage** out) {
    return vips_hist_find_indexed(in, index, out, NULL);
}

int vipsgen_hist_find_indexed_with_options(VipsImage* in, VipsImage* index, VipsImage** out, VipsCombine combine) {
    VipsOperation *operation = vips_operation_new("hist_find_indexed");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "index", index, NULL) ||
        set_int_param(operation, "combine", combine)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_hough_line(VipsImage* in, VipsImage** out) {
    return vips_hough_line(in, out, NULL);
}

int vipsgen_hough_line_with_options(VipsImage* in, VipsImage** out, int width, int height) {
    VipsOperation *operation = vips_operation_new("hough_line");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        set_int_param(operation, "width", width) ||
        set_int_param(operation, "height", height)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_hough_circle(VipsImage* in, VipsImage** out) {
    return vips_hough_circle(in, out, NULL);
}

int vipsgen_hough_circle_with_options(VipsImage* in, VipsImage** out, int scale, int min_radius, int max_radius) {
    VipsOperation *operation = vips_operation_new("hough_circle");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        set_int_param(operation, "scale", scale) ||
        set_int_param(operation, "min_radius", min_radius) ||
        set_int_param(operation, "max_radius", max_radius)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_project(VipsImage* in, VipsImage** columns, VipsImage** rows) {
    return vips_project(in, columns, rows, NULL);
}

int vipsgen_profile(VipsImage* in, VipsImage** columns, VipsImage** rows) {
    return vips_profile(in, columns, rows, NULL);
}

int vipsgen_measure(VipsImage* in, VipsImage** out, int h, int v) {
    return vips_measure(in, out, h, v, NULL);
}

int vipsgen_measure_with_options(VipsImage* in, VipsImage** out, int h, int v, int left, int top, int width, int height) {
    VipsOperation *operation = vips_operation_new("measure");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "h", h, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "v", v, NULL) ||
        set_int_param(operation, "left", left) ||
        set_int_param(operation, "top", top) ||
        set_int_param(operation, "width", width) ||
        set_int_param(operation, "height", height)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_getpoint(VipsImage* in, double** out_array, int* n, int x, int y) {
    return vips_getpoint(in, out_array, n, x, y, NULL);
}

int vipsgen_getpoint_with_options(VipsImage* in, double** out_array, int* n, int x, int y, gboolean unpack_complex) {
    VipsOperation *operation = vips_operation_new("getpoint");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "x", x, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "y", y, NULL) ||
        set_bool_param(operation, "unpack_complex", unpack_complex)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out_array", out_array, "n", n, NULL);
    return result;
}

int vipsgen_find_trim(VipsImage* in, int* left, int* top, int* width, int* height) {
    return vips_find_trim(in, left, top, width, height, NULL);
}

int vipsgen_find_trim_with_options(VipsImage* in, int* left, int* top, int* width, int* height, double threshold, double* background, int background_n, gboolean line_art) {
    VipsOperation *operation = vips_operation_new("find_trim");
    if (!operation) return 1;
    VipsArrayDouble *background_array = NULL;
    if (background != NULL && background_n > 0) { background_array = vips_array_double_new(background, background_n); }
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        set_double_param(operation, "threshold", threshold) ||
        set_array_double_param(operation, "background", background_array) ||
        set_bool_param(operation, "line_art", line_art)
    ) {
        g_object_unref(operation);
        if (background_array != NULL) { vips_area_unref(VIPS_AREA(background_array)); }
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "left", left, "top", top, "width", width, "height", height, NULL);
    if (background_array != NULL) { vips_area_unref(VIPS_AREA(background_array)); }
    return result;
}

int vipsgen_copy(VipsImage* in, VipsImage** out) {
    return vips_copy(in, out, NULL);
}

int vipsgen_copy_with_options(VipsImage* in, VipsImage** out, int width, int height, int bands, VipsBandFormat format, VipsCoding coding, VipsInterpretation interpretation, double xres, double yres, int xoffset, int yoffset) {
    VipsOperation *operation = vips_operation_new("copy");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        set_int_param(operation, "width", width) ||
        set_int_param(operation, "height", height) ||
        set_int_param(operation, "bands", bands) ||
        set_int_param(operation, "format", format) ||
        set_int_param(operation, "coding", coding) ||
        set_int_param(operation, "interpretation", interpretation) ||
        set_double_param(operation, "xres", xres) ||
        set_double_param(operation, "yres", yres) ||
        set_int_param(operation, "xoffset", xoffset) ||
        set_int_param(operation, "yoffset", yoffset)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_tilecache(VipsImage* in, VipsImage** out) {
    return vips_tilecache(in, out, NULL);
}

int vipsgen_tilecache_with_options(VipsImage* in, VipsImage** out, int tile_width, int tile_height, int max_tiles, VipsAccess access, gboolean threaded, gboolean persistent) {
    VipsOperation *operation = vips_operation_new("tilecache");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        set_int_param(operation, "tile_width", tile_width) ||
        set_int_param(operation, "tile_height", tile_height) ||
        set_int_param(operation, "max_tiles", max_tiles) ||
        set_int_param(operation, "access", access) ||
        set_bool_param(operation, "threaded", threaded) ||
        set_bool_param(operation, "persistent", persistent)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_linecache(VipsImage* in, VipsImage** out) {
    return vips_linecache(in, out, NULL);
}

int vipsgen_linecache_with_options(VipsImage* in, VipsImage** out, int tile_height, VipsAccess access, gboolean threaded, gboolean persistent) {
    VipsOperation *operation = vips_operation_new("linecache");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        set_int_param(operation, "tile_height", tile_height) ||
        set_int_param(operation, "access", access) ||
        set_bool_param(operation, "threaded", threaded) ||
        set_bool_param(operation, "persistent", persistent)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_sequential(VipsImage* in, VipsImage** out) {
    return vips_sequential(in, out, NULL);
}

int vipsgen_sequential_with_options(VipsImage* in, VipsImage** out, int tile_height) {
    VipsOperation *operation = vips_operation_new("sequential");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        set_int_param(operation, "tile_height", tile_height)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_embed(VipsImage* in, VipsImage** out, int x, int y, int width, int height) {
    return vips_embed(in, out, x, y, width, height, NULL);
}

int vipsgen_embed_with_options(VipsImage* in, VipsImage** out, int x, int y, int width, int height, VipsExtend extend, double* background, int background_n) {
    VipsOperation *operation = vips_operation_new("embed");
    if (!operation) return 1;
    VipsArrayDouble *background_array = NULL;
    if (background != NULL && background_n > 0) { background_array = vips_array_double_new(background, background_n); }
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "x", x, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "y", y, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "width", width, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "height", height, NULL) ||
        set_int_param(operation, "extend", extend) ||
        set_array_double_param(operation, "background", background_array)
    ) {
        g_object_unref(operation);
        if (background_array != NULL) { vips_area_unref(VIPS_AREA(background_array)); }
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    if (background_array != NULL) { vips_area_unref(VIPS_AREA(background_array)); }
    return result;
}

int vipsgen_gravity(VipsImage* in, VipsImage** out, VipsCompassDirection direction, int width, int height) {
    return vips_gravity(in, out, direction, width, height, NULL);
}

int vipsgen_gravity_with_options(VipsImage* in, VipsImage** out, VipsCompassDirection direction, int width, int height, VipsExtend extend, double* background, int background_n) {
    VipsOperation *operation = vips_operation_new("gravity");
    if (!operation) return 1;
    VipsArrayDouble *background_array = NULL;
    if (background != NULL && background_n > 0) { background_array = vips_array_double_new(background, background_n); }
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "direction", direction, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "width", width, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "height", height, NULL) ||
        set_int_param(operation, "extend", extend) ||
        set_array_double_param(operation, "background", background_array)
    ) {
        g_object_unref(operation);
        if (background_array != NULL) { vips_area_unref(VIPS_AREA(background_array)); }
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    if (background_array != NULL) { vips_area_unref(VIPS_AREA(background_array)); }
    return result;
}

int vipsgen_flip(VipsImage* in, VipsImage** out, VipsDirection direction) {
    return vips_flip(in, out, direction, NULL);
}

int vipsgen_insert(VipsImage* main, VipsImage* sub, VipsImage** out, int x, int y) {
    return vips_insert(main, sub, out, x, y, NULL);
}

int vipsgen_insert_with_options(VipsImage* main, VipsImage* sub, VipsImage** out, int x, int y, gboolean expand, double* background, int background_n) {
    VipsOperation *operation = vips_operation_new("insert");
    if (!operation) return 1;
    VipsArrayDouble *background_array = NULL;
    if (background != NULL && background_n > 0) { background_array = vips_array_double_new(background, background_n); }
    if (
        vips_object_set(VIPS_OBJECT(operation), "main", main, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "sub", sub, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "x", x, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "y", y, NULL) ||
        set_bool_param(operation, "expand", expand) ||
        set_array_double_param(operation, "background", background_array)
    ) {
        g_object_unref(operation);
        if (background_array != NULL) { vips_area_unref(VIPS_AREA(background_array)); }
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    if (background_array != NULL) { vips_area_unref(VIPS_AREA(background_array)); }
    return result;
}

int vipsgen_join(VipsImage* in1, VipsImage* in2, VipsImage** out, VipsDirection direction) {
    return vips_join(in1, in2, out, direction, NULL);
}

int vipsgen_join_with_options(VipsImage* in1, VipsImage* in2, VipsImage** out, VipsDirection direction, gboolean expand, int shim, double* background, int background_n, VipsAlign align) {
    VipsOperation *operation = vips_operation_new("join");
    if (!operation) return 1;
    VipsArrayDouble *background_array = NULL;
    if (background != NULL && background_n > 0) { background_array = vips_array_double_new(background, background_n); }
    if (
        vips_object_set(VIPS_OBJECT(operation), "in1", in1, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "in2", in2, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "direction", direction, NULL) ||
        set_bool_param(operation, "expand", expand) ||
        set_int_param(operation, "shim", shim) ||
        set_array_double_param(operation, "background", background_array) ||
        set_int_param(operation, "align", align)
    ) {
        g_object_unref(operation);
        if (background_array != NULL) { vips_area_unref(VIPS_AREA(background_array)); }
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    if (background_array != NULL) { vips_area_unref(VIPS_AREA(background_array)); }
    return result;
}

int vipsgen_arrayjoin(VipsImage** in, VipsImage** out, int n) {
    return vips_arrayjoin(in, out, n, NULL);
}

int vipsgen_arrayjoin_with_options(VipsImage** in, VipsImage** out, int n, int across, int shim, double* background, int background_n, VipsAlign halign, VipsAlign valign, int hspacing, int vspacing) {
    VipsOperation *operation = vips_operation_new("arrayjoin");
    if (!operation) return 1;
    VipsArrayDouble *background_array = NULL;
    if (background != NULL && background_n > 0) { background_array = vips_array_double_new(background, background_n); }
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "n", n, NULL) ||
        set_int_param(operation, "across", across) ||
        set_int_param(operation, "shim", shim) ||
        set_array_double_param(operation, "background", background_array) ||
        set_int_param(operation, "halign", halign) ||
        set_int_param(operation, "valign", valign) ||
        set_int_param(operation, "hspacing", hspacing) ||
        set_int_param(operation, "vspacing", vspacing)
    ) {
        g_object_unref(operation);
        if (background_array != NULL) { vips_area_unref(VIPS_AREA(background_array)); }
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    if (background_array != NULL) { vips_area_unref(VIPS_AREA(background_array)); }
    return result;
}

int vipsgen_extract_area(VipsImage* input, VipsImage** out, int left, int top, int width, int height) {
    return vips_extract_area(input, out, left, top, width, height, NULL);
}

int vipsgen_smartcrop(VipsImage* input, VipsImage** out, int width, int height) {
    return vips_smartcrop(input, out, width, height, NULL);
}

int vipsgen_smartcrop_with_options(VipsImage* input, VipsImage** out, int width, int height, VipsInteresting interesting, gboolean premultiplied) {
    VipsOperation *operation = vips_operation_new("smartcrop");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "input", input, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "width", width, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "height", height, NULL) ||
        set_int_param(operation, "interesting", interesting) ||
        set_bool_param(operation, "premultiplied", premultiplied)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_extract_band(VipsImage* in, VipsImage** out, int band) {
    return vips_extract_band(in, out, band, NULL);
}

int vipsgen_extract_band_with_options(VipsImage* in, VipsImage** out, int band, int n) {
    VipsOperation *operation = vips_operation_new("extract_band");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "band", band, NULL) ||
        set_int_param(operation, "n", n)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_bandjoin(VipsImage** in, VipsImage** out, int n) {
    return vips_bandjoin(in, out, n, NULL);
}

int vipsgen_bandjoin_const(VipsImage* in, VipsImage** out, double* c, int n) {
    return vips_bandjoin_const(in, out, c, n, NULL);
}

int vipsgen_bandrank(VipsImage** in, VipsImage** out, int n) {
    return vips_bandrank(in, out, n, NULL);
}

int vipsgen_bandrank_with_options(VipsImage** in, VipsImage** out, int n, int index) {
    VipsOperation *operation = vips_operation_new("bandrank");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "n", n, NULL) ||
        set_int_param(operation, "index", index)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_bandmean(VipsImage* in, VipsImage** out) {
    return vips_bandmean(in, out, NULL);
}

int vipsgen_bandbool(VipsImage* in, VipsImage** out, VipsOperationBoolean boolean) {
    return vips_bandbool(in, out, boolean, NULL);
}

int vipsgen_replicate(VipsImage* in, VipsImage** out, int across, int down) {
    return vips_replicate(in, out, across, down, NULL);
}

int vipsgen_cast(VipsImage* in, VipsImage** out, VipsBandFormat format) {
    return vips_cast(in, out, format, NULL);
}

int vipsgen_cast_with_options(VipsImage* in, VipsImage** out, VipsBandFormat format, gboolean shift) {
    VipsOperation *operation = vips_operation_new("cast");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "format", format, NULL) ||
        set_bool_param(operation, "shift", shift)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_rot(VipsImage* in, VipsImage** out, VipsAngle angle) {
    return vips_rot(in, out, angle, NULL);
}

int vipsgen_rot45(VipsImage* in, VipsImage** out) {
    return vips_rot45(in, out, NULL);
}

int vipsgen_rot45_with_options(VipsImage* in, VipsImage** out, VipsAngle45 angle) {
    VipsOperation *operation = vips_operation_new("rot45");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        set_int_param(operation, "angle", angle)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_autorot(VipsImage* in, VipsImage** out) {
    return vips_autorot(in, out, NULL);
}

int vipsgen_ifthenelse(VipsImage* cond, VipsImage* in1, VipsImage* in2, VipsImage** out) {
    return vips_ifthenelse(cond, in1, in2, out, NULL);
}

int vipsgen_ifthenelse_with_options(VipsImage* cond, VipsImage* in1, VipsImage* in2, VipsImage** out, gboolean blend) {
    VipsOperation *operation = vips_operation_new("ifthenelse");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "cond", cond, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "in1", in1, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "in2", in2, NULL) ||
        set_bool_param(operation, "blend", blend)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_recomb(VipsImage* in, VipsImage** out, VipsImage* m) {
    return vips_recomb(in, out, m, NULL);
}

int vipsgen_bandfold(VipsImage* in, VipsImage** out) {
    return vips_bandfold(in, out, NULL);
}

int vipsgen_bandfold_with_options(VipsImage* in, VipsImage** out, int factor) {
    VipsOperation *operation = vips_operation_new("bandfold");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        set_int_param(operation, "factor", factor)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_bandunfold(VipsImage* in, VipsImage** out) {
    return vips_bandunfold(in, out, NULL);
}

int vipsgen_bandunfold_with_options(VipsImage* in, VipsImage** out, int factor) {
    VipsOperation *operation = vips_operation_new("bandunfold");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        set_int_param(operation, "factor", factor)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_flatten(VipsImage* in, VipsImage** out) {
    return vips_flatten(in, out, NULL);
}

int vipsgen_flatten_with_options(VipsImage* in, VipsImage** out, double* background, int background_n, double max_alpha) {
    VipsOperation *operation = vips_operation_new("flatten");
    if (!operation) return 1;
    VipsArrayDouble *background_array = NULL;
    if (background != NULL && background_n > 0) { background_array = vips_array_double_new(background, background_n); }
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        set_array_double_param(operation, "background", background_array) ||
        set_double_param(operation, "max_alpha", max_alpha)
    ) {
        g_object_unref(operation);
        if (background_array != NULL) { vips_area_unref(VIPS_AREA(background_array)); }
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    if (background_array != NULL) { vips_area_unref(VIPS_AREA(background_array)); }
    return result;
}

int vipsgen_premultiply(VipsImage* in, VipsImage** out) {
    return vips_premultiply(in, out, NULL);
}

int vipsgen_premultiply_with_options(VipsImage* in, VipsImage** out, double max_alpha) {
    VipsOperation *operation = vips_operation_new("premultiply");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        set_double_param(operation, "max_alpha", max_alpha)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_unpremultiply(VipsImage* in, VipsImage** out) {
    return vips_unpremultiply(in, out, NULL);
}

int vipsgen_unpremultiply_with_options(VipsImage* in, VipsImage** out, double max_alpha, int alpha_band) {
    VipsOperation *operation = vips_operation_new("unpremultiply");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        set_double_param(operation, "max_alpha", max_alpha) ||
        set_int_param(operation, "alpha_band", alpha_band)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_grid(VipsImage* in, VipsImage** out, int tile_height, int across, int down) {
    return vips_grid(in, out, tile_height, across, down, NULL);
}

int vipsgen_transpose3d(VipsImage* in, VipsImage** out) {
    return vips_transpose3d(in, out, NULL);
}

int vipsgen_transpose3d_with_options(VipsImage* in, VipsImage** out, int page_height) {
    VipsOperation *operation = vips_operation_new("transpose3d");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        set_int_param(operation, "page_height", page_height)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_scale(VipsImage* in, VipsImage** out) {
    return vips_scale(in, out, NULL);
}

int vipsgen_scale_with_options(VipsImage* in, VipsImage** out, double exp, gboolean log) {
    VipsOperation *operation = vips_operation_new("scale");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        set_double_param(operation, "exp", exp) ||
        set_bool_param(operation, "log", log)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_wrap(VipsImage* in, VipsImage** out) {
    return vips_wrap(in, out, NULL);
}

int vipsgen_wrap_with_options(VipsImage* in, VipsImage** out, int x, int y) {
    VipsOperation *operation = vips_operation_new("wrap");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        set_int_param(operation, "x", x) ||
        set_int_param(operation, "y", y)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_zoom(VipsImage* input, VipsImage** out, int xfac, int yfac) {
    return vips_zoom(input, out, xfac, yfac, NULL);
}

int vipsgen_subsample(VipsImage* input, VipsImage** out, int xfac, int yfac) {
    return vips_subsample(input, out, xfac, yfac, NULL);
}

int vipsgen_subsample_with_options(VipsImage* input, VipsImage** out, int xfac, int yfac, gboolean point) {
    VipsOperation *operation = vips_operation_new("subsample");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "input", input, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "xfac", xfac, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "yfac", yfac, NULL) ||
        set_bool_param(operation, "point", point)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_msb(VipsImage* in, VipsImage** out) {
    return vips_msb(in, out, NULL);
}

int vipsgen_msb_with_options(VipsImage* in, VipsImage** out, int band) {
    VipsOperation *operation = vips_operation_new("msb");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        set_int_param(operation, "band", band)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_byteswap(VipsImage* in, VipsImage** out) {
    return vips_byteswap(in, out, NULL);
}

int vipsgen_falsecolour(VipsImage* in, VipsImage** out) {
    return vips_falsecolour(in, out, NULL);
}

int vipsgen_gamma(VipsImage* in, VipsImage** out) {
    return vips_gamma(in, out, NULL);
}

int vipsgen_gamma_with_options(VipsImage* in, VipsImage** out, double exponent) {
    VipsOperation *operation = vips_operation_new("gamma");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        set_double_param(operation, "exponent", exponent)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_composite(VipsImage** in, VipsImage** out, int n, int* mode) {
    return vips_composite(in, out, n, mode, NULL);
}

int vipsgen_composite_with_options(VipsImage** in, VipsImage** out, int n, int* mode, int* x, int x_n, int* y, int y_n, VipsInterpretation compositing_space, gboolean premultiplied) {
    VipsOperation *operation = vips_operation_new("composite");
    if (!operation) return 1;
    VipsArrayInt *x_array = NULL;
    if (x != NULL && x_n > 0) { x_array = vips_array_int_new(x, x_n); }
    VipsArrayInt *y_array = NULL;
    if (y != NULL && y_n > 0) { y_array = vips_array_int_new(y, y_n); }
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "n", n, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "mode", mode, NULL) ||
        set_array_int_param(operation, "x", x_array) ||
        set_array_int_param(operation, "y", y_array) ||
        set_int_param(operation, "compositing_space", compositing_space) ||
        set_bool_param(operation, "premultiplied", premultiplied)
    ) {
        g_object_unref(operation);
        if (x_array != NULL) { vips_area_unref(VIPS_AREA(x_array)); }
        if (y_array != NULL) { vips_area_unref(VIPS_AREA(y_array)); }
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    if (x_array != NULL) { vips_area_unref(VIPS_AREA(x_array)); }
    if (y_array != NULL) { vips_area_unref(VIPS_AREA(y_array)); }
    return result;
}

int vipsgen_composite2(VipsImage* base, VipsImage* overlay, VipsImage** out, VipsBlendMode mode) {
    return vips_composite2(base, overlay, out, mode, NULL);
}

int vipsgen_composite2_with_options(VipsImage* base, VipsImage* overlay, VipsImage** out, VipsBlendMode mode, int x, int y, VipsInterpretation compositing_space, gboolean premultiplied) {
    VipsOperation *operation = vips_operation_new("composite2");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "base", base, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "overlay", overlay, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "mode", mode, NULL) ||
        set_int_param(operation, "x", x) ||
        set_int_param(operation, "y", y) ||
        set_int_param(operation, "compositing_space", compositing_space) ||
        set_bool_param(operation, "premultiplied", premultiplied)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_addalpha(VipsImage* in, VipsImage** out) {
    return vips_addalpha(in, out, NULL);
}

int vipsgen_black(VipsImage** out, int width, int height) {
    return vips_black(out, width, height, NULL);
}

int vipsgen_black_with_options(VipsImage** out, int width, int height, int bands) {
    VipsOperation *operation = vips_operation_new("black");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "width", width, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "height", height, NULL) ||
        set_int_param(operation, "bands", bands)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_gaussnoise(VipsImage** out, int width, int height) {
    return vips_gaussnoise(out, width, height, NULL);
}

int vipsgen_gaussnoise_with_options(VipsImage** out, int width, int height, double sigma, double mean, int seed) {
    VipsOperation *operation = vips_operation_new("gaussnoise");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "width", width, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "height", height, NULL) ||
        set_double_param(operation, "sigma", sigma) ||
        set_double_param(operation, "mean", mean) ||
        set_int_param(operation, "seed", seed)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_xyz(VipsImage** out, int width, int height) {
    return vips_xyz(out, width, height, NULL);
}

int vipsgen_xyz_with_options(VipsImage** out, int width, int height, int csize, int dsize, int esize) {
    VipsOperation *operation = vips_operation_new("xyz");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "width", width, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "height", height, NULL) ||
        set_int_param(operation, "csize", csize) ||
        set_int_param(operation, "dsize", dsize) ||
        set_int_param(operation, "esize", esize)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_gaussmat(VipsImage** out, double sigma, double min_ampl) {
    return vips_gaussmat(out, sigma, min_ampl, NULL);
}

int vipsgen_gaussmat_with_options(VipsImage** out, double sigma, double min_ampl, gboolean separable, VipsPrecision precision) {
    VipsOperation *operation = vips_operation_new("gaussmat");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "sigma", sigma, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "min_ampl", min_ampl, NULL) ||
        set_bool_param(operation, "separable", separable) ||
        set_int_param(operation, "precision", precision)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_logmat(VipsImage** out, double sigma, double min_ampl) {
    return vips_logmat(out, sigma, min_ampl, NULL);
}

int vipsgen_logmat_with_options(VipsImage** out, double sigma, double min_ampl, gboolean separable, VipsPrecision precision) {
    VipsOperation *operation = vips_operation_new("logmat");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "sigma", sigma, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "min_ampl", min_ampl, NULL) ||
        set_bool_param(operation, "separable", separable) ||
        set_int_param(operation, "precision", precision)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_text(VipsImage** out, const char* text) {
    return vips_text(out, text, NULL);
}

int vipsgen_text_with_options(VipsImage** out, const char* text, const char* font, int width, int height, VipsAlign align, gboolean justify, int dpi, int spacing, const char* fontfile, gboolean rgba, VipsTextWrap wrap) {
    VipsOperation *operation = vips_operation_new("text");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "text", text, NULL) ||
        set_string_param(operation, "font", font) ||
        set_int_param(operation, "width", width) ||
        set_int_param(operation, "height", height) ||
        set_int_param(operation, "align", align) ||
        set_bool_param(operation, "justify", justify) ||
        set_int_param(operation, "dpi", dpi) ||
        set_int_param(operation, "spacing", spacing) ||
        set_string_param(operation, "fontfile", fontfile) ||
        set_bool_param(operation, "rgba", rgba) ||
        set_int_param(operation, "wrap", wrap)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_sdf(VipsImage** out, int width, int height, VipsSdfShape shape) {
    return vips_sdf(out, width, height, shape, NULL);
}

int vipsgen_sdf_with_options(VipsImage** out, int width, int height, VipsSdfShape shape, double r, double* a, int a_n, double* b, int b_n, double* corners, int corners_n) {
    VipsOperation *operation = vips_operation_new("sdf");
    if (!operation) return 1;
    VipsArrayDouble *a_array = NULL;
    if (a != NULL && a_n > 0) { a_array = vips_array_double_new(a, a_n); }
    VipsArrayDouble *b_array = NULL;
    if (b != NULL && b_n > 0) { b_array = vips_array_double_new(b, b_n); }
    VipsArrayDouble *corners_array = NULL;
    if (corners != NULL && corners_n > 0) { corners_array = vips_array_double_new(corners, corners_n); }
    if (
        vips_object_set(VIPS_OBJECT(operation), "width", width, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "height", height, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "shape", shape, NULL) ||
        set_double_param(operation, "r", r) ||
        set_array_double_param(operation, "a", a_array) ||
        set_array_double_param(operation, "b", b_array) ||
        set_array_double_param(operation, "corners", corners_array)
    ) {
        g_object_unref(operation);
        if (a_array != NULL) { vips_area_unref(VIPS_AREA(a_array)); }
        if (b_array != NULL) { vips_area_unref(VIPS_AREA(b_array)); }
        if (corners_array != NULL) { vips_area_unref(VIPS_AREA(corners_array)); }
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    if (a_array != NULL) { vips_area_unref(VIPS_AREA(a_array)); }
    if (b_array != NULL) { vips_area_unref(VIPS_AREA(b_array)); }
    if (corners_array != NULL) { vips_area_unref(VIPS_AREA(corners_array)); }
    return result;
}

int vipsgen_eye(VipsImage** out, int width, int height) {
    return vips_eye(out, width, height, NULL);
}

int vipsgen_eye_with_options(VipsImage** out, int width, int height, gboolean uchar, double factor) {
    VipsOperation *operation = vips_operation_new("eye");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "width", width, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "height", height, NULL) ||
        set_bool_param(operation, "uchar", uchar) ||
        set_double_param(operation, "factor", factor)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_grey(VipsImage** out, int width, int height) {
    return vips_grey(out, width, height, NULL);
}

int vipsgen_grey_with_options(VipsImage** out, int width, int height, gboolean uchar) {
    VipsOperation *operation = vips_operation_new("grey");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "width", width, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "height", height, NULL) ||
        set_bool_param(operation, "uchar", uchar)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_zone(VipsImage** out, int width, int height) {
    return vips_zone(out, width, height, NULL);
}

int vipsgen_zone_with_options(VipsImage** out, int width, int height, gboolean uchar) {
    VipsOperation *operation = vips_operation_new("zone");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "width", width, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "height", height, NULL) ||
        set_bool_param(operation, "uchar", uchar)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_sines(VipsImage** out, int width, int height) {
    return vips_sines(out, width, height, NULL);
}

int vipsgen_sines_with_options(VipsImage** out, int width, int height, gboolean uchar, double hfreq, double vfreq) {
    VipsOperation *operation = vips_operation_new("sines");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "width", width, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "height", height, NULL) ||
        set_bool_param(operation, "uchar", uchar) ||
        set_double_param(operation, "hfreq", hfreq) ||
        set_double_param(operation, "vfreq", vfreq)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_mask_ideal(VipsImage** out, int width, int height, double frequency_cutoff) {
    return vips_mask_ideal(out, width, height, frequency_cutoff, NULL);
}

int vipsgen_mask_ideal_with_options(VipsImage** out, int width, int height, double frequency_cutoff, gboolean uchar, gboolean nodc, gboolean reject, gboolean optical) {
    VipsOperation *operation = vips_operation_new("mask_ideal");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "width", width, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "height", height, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "frequency_cutoff", frequency_cutoff, NULL) ||
        set_bool_param(operation, "uchar", uchar) ||
        set_bool_param(operation, "nodc", nodc) ||
        set_bool_param(operation, "reject", reject) ||
        set_bool_param(operation, "optical", optical)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_mask_ideal_ring(VipsImage** out, int width, int height, double frequency_cutoff, double ringwidth) {
    return vips_mask_ideal_ring(out, width, height, frequency_cutoff, ringwidth, NULL);
}

int vipsgen_mask_ideal_ring_with_options(VipsImage** out, int width, int height, double frequency_cutoff, double ringwidth, gboolean uchar, gboolean nodc, gboolean reject, gboolean optical) {
    VipsOperation *operation = vips_operation_new("mask_ideal_ring");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "width", width, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "height", height, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "frequency_cutoff", frequency_cutoff, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "ringwidth", ringwidth, NULL) ||
        set_bool_param(operation, "uchar", uchar) ||
        set_bool_param(operation, "nodc", nodc) ||
        set_bool_param(operation, "reject", reject) ||
        set_bool_param(operation, "optical", optical)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_mask_ideal_band(VipsImage** out, int width, int height, double frequency_cutoff_x, double frequency_cutoff_y, double radius) {
    return vips_mask_ideal_band(out, width, height, frequency_cutoff_x, frequency_cutoff_y, radius, NULL);
}

int vipsgen_mask_ideal_band_with_options(VipsImage** out, int width, int height, double frequency_cutoff_x, double frequency_cutoff_y, double radius, gboolean uchar, gboolean nodc, gboolean reject, gboolean optical) {
    VipsOperation *operation = vips_operation_new("mask_ideal_band");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "width", width, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "height", height, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "frequency_cutoff_x", frequency_cutoff_x, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "frequency_cutoff_y", frequency_cutoff_y, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "radius", radius, NULL) ||
        set_bool_param(operation, "uchar", uchar) ||
        set_bool_param(operation, "nodc", nodc) ||
        set_bool_param(operation, "reject", reject) ||
        set_bool_param(operation, "optical", optical)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_mask_butterworth(VipsImage** out, int width, int height, double order, double frequency_cutoff, double amplitude_cutoff) {
    return vips_mask_butterworth(out, width, height, order, frequency_cutoff, amplitude_cutoff, NULL);
}

int vipsgen_mask_butterworth_with_options(VipsImage** out, int width, int height, double order, double frequency_cutoff, double amplitude_cutoff, gboolean uchar, gboolean nodc, gboolean reject, gboolean optical) {
    VipsOperation *operation = vips_operation_new("mask_butterworth");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "width", width, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "height", height, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "order", order, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "frequency_cutoff", frequency_cutoff, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "amplitude_cutoff", amplitude_cutoff, NULL) ||
        set_bool_param(operation, "uchar", uchar) ||
        set_bool_param(operation, "nodc", nodc) ||
        set_bool_param(operation, "reject", reject) ||
        set_bool_param(operation, "optical", optical)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_mask_butterworth_ring(VipsImage** out, int width, int height, double order, double frequency_cutoff, double amplitude_cutoff, double ringwidth) {
    return vips_mask_butterworth_ring(out, width, height, order, frequency_cutoff, amplitude_cutoff, ringwidth, NULL);
}

int vipsgen_mask_butterworth_ring_with_options(VipsImage** out, int width, int height, double order, double frequency_cutoff, double amplitude_cutoff, double ringwidth, gboolean uchar, gboolean nodc, gboolean reject, gboolean optical) {
    VipsOperation *operation = vips_operation_new("mask_butterworth_ring");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "width", width, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "height", height, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "order", order, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "frequency_cutoff", frequency_cutoff, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "amplitude_cutoff", amplitude_cutoff, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "ringwidth", ringwidth, NULL) ||
        set_bool_param(operation, "uchar", uchar) ||
        set_bool_param(operation, "nodc", nodc) ||
        set_bool_param(operation, "reject", reject) ||
        set_bool_param(operation, "optical", optical)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_mask_butterworth_band(VipsImage** out, int width, int height, double order, double frequency_cutoff_x, double frequency_cutoff_y, double radius, double amplitude_cutoff) {
    return vips_mask_butterworth_band(out, width, height, order, frequency_cutoff_x, frequency_cutoff_y, radius, amplitude_cutoff, NULL);
}

int vipsgen_mask_butterworth_band_with_options(VipsImage** out, int width, int height, double order, double frequency_cutoff_x, double frequency_cutoff_y, double radius, double amplitude_cutoff, gboolean uchar, gboolean nodc, gboolean reject, gboolean optical) {
    VipsOperation *operation = vips_operation_new("mask_butterworth_band");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "width", width, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "height", height, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "order", order, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "frequency_cutoff_x", frequency_cutoff_x, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "frequency_cutoff_y", frequency_cutoff_y, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "radius", radius, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "amplitude_cutoff", amplitude_cutoff, NULL) ||
        set_bool_param(operation, "uchar", uchar) ||
        set_bool_param(operation, "nodc", nodc) ||
        set_bool_param(operation, "reject", reject) ||
        set_bool_param(operation, "optical", optical)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_mask_gaussian(VipsImage** out, int width, int height, double frequency_cutoff, double amplitude_cutoff) {
    return vips_mask_gaussian(out, width, height, frequency_cutoff, amplitude_cutoff, NULL);
}

int vipsgen_mask_gaussian_with_options(VipsImage** out, int width, int height, double frequency_cutoff, double amplitude_cutoff, gboolean uchar, gboolean nodc, gboolean reject, gboolean optical) {
    VipsOperation *operation = vips_operation_new("mask_gaussian");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "width", width, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "height", height, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "frequency_cutoff", frequency_cutoff, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "amplitude_cutoff", amplitude_cutoff, NULL) ||
        set_bool_param(operation, "uchar", uchar) ||
        set_bool_param(operation, "nodc", nodc) ||
        set_bool_param(operation, "reject", reject) ||
        set_bool_param(operation, "optical", optical)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_mask_gaussian_ring(VipsImage** out, int width, int height, double frequency_cutoff, double amplitude_cutoff, double ringwidth) {
    return vips_mask_gaussian_ring(out, width, height, frequency_cutoff, amplitude_cutoff, ringwidth, NULL);
}

int vipsgen_mask_gaussian_ring_with_options(VipsImage** out, int width, int height, double frequency_cutoff, double amplitude_cutoff, double ringwidth, gboolean uchar, gboolean nodc, gboolean reject, gboolean optical) {
    VipsOperation *operation = vips_operation_new("mask_gaussian_ring");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "width", width, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "height", height, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "frequency_cutoff", frequency_cutoff, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "amplitude_cutoff", amplitude_cutoff, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "ringwidth", ringwidth, NULL) ||
        set_bool_param(operation, "uchar", uchar) ||
        set_bool_param(operation, "nodc", nodc) ||
        set_bool_param(operation, "reject", reject) ||
        set_bool_param(operation, "optical", optical)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_mask_gaussian_band(VipsImage** out, int width, int height, double frequency_cutoff_x, double frequency_cutoff_y, double radius, double amplitude_cutoff) {
    return vips_mask_gaussian_band(out, width, height, frequency_cutoff_x, frequency_cutoff_y, radius, amplitude_cutoff, NULL);
}

int vipsgen_mask_gaussian_band_with_options(VipsImage** out, int width, int height, double frequency_cutoff_x, double frequency_cutoff_y, double radius, double amplitude_cutoff, gboolean uchar, gboolean nodc, gboolean reject, gboolean optical) {
    VipsOperation *operation = vips_operation_new("mask_gaussian_band");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "width", width, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "height", height, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "frequency_cutoff_x", frequency_cutoff_x, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "frequency_cutoff_y", frequency_cutoff_y, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "radius", radius, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "amplitude_cutoff", amplitude_cutoff, NULL) ||
        set_bool_param(operation, "uchar", uchar) ||
        set_bool_param(operation, "nodc", nodc) ||
        set_bool_param(operation, "reject", reject) ||
        set_bool_param(operation, "optical", optical)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_mask_fractal(VipsImage** out, int width, int height, double fractal_dimension) {
    return vips_mask_fractal(out, width, height, fractal_dimension, NULL);
}

int vipsgen_mask_fractal_with_options(VipsImage** out, int width, int height, double fractal_dimension, gboolean uchar, gboolean nodc, gboolean reject, gboolean optical) {
    VipsOperation *operation = vips_operation_new("mask_fractal");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "width", width, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "height", height, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "fractal_dimension", fractal_dimension, NULL) ||
        set_bool_param(operation, "uchar", uchar) ||
        set_bool_param(operation, "nodc", nodc) ||
        set_bool_param(operation, "reject", reject) ||
        set_bool_param(operation, "optical", optical)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_buildlut(VipsImage* in, VipsImage** out) {
    return vips_buildlut(in, out, NULL);
}

int vipsgen_invertlut(VipsImage* in, VipsImage** out) {
    return vips_invertlut(in, out, NULL);
}

int vipsgen_invertlut_with_options(VipsImage* in, VipsImage** out, int size) {
    VipsOperation *operation = vips_operation_new("invertlut");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        set_int_param(operation, "size", size)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_tonelut(VipsImage** out) {
    return vips_tonelut(out, NULL);
}

int vipsgen_tonelut_with_options(VipsImage** out, int in_max, int out_max, double Lb, double Lw, double Ps, double Pm, double Ph, double S, double M, double H) {
    VipsOperation *operation = vips_operation_new("tonelut");
    if (!operation) return 1;
    if (
        set_int_param(operation, "in_max", in_max) ||
        set_int_param(operation, "out_max", out_max) ||
        set_double_param(operation, "Lb", Lb) ||
        set_double_param(operation, "Lw", Lw) ||
        set_double_param(operation, "Ps", Ps) ||
        set_double_param(operation, "Pm", Pm) ||
        set_double_param(operation, "Ph", Ph) ||
        set_double_param(operation, "S", S) ||
        set_double_param(operation, "M", M) ||
        set_double_param(operation, "H", H)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_identity(VipsImage** out) {
    return vips_identity(out, NULL);
}

int vipsgen_identity_with_options(VipsImage** out, int bands, gboolean ushort, int size) {
    VipsOperation *operation = vips_operation_new("identity");
    if (!operation) return 1;
    if (
        set_int_param(operation, "bands", bands) ||
        set_bool_param(operation, "ushort", ushort) ||
        set_int_param(operation, "size", size)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_fractsurf(VipsImage** out, int width, int height, double fractal_dimension) {
    return vips_fractsurf(out, width, height, fractal_dimension, NULL);
}

int vipsgen_worley(VipsImage** out, int width, int height) {
    return vips_worley(out, width, height, NULL);
}

int vipsgen_worley_with_options(VipsImage** out, int width, int height, int cell_size, int seed) {
    VipsOperation *operation = vips_operation_new("worley");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "width", width, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "height", height, NULL) ||
        set_int_param(operation, "cell_size", cell_size) ||
        set_int_param(operation, "seed", seed)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_perlin(VipsImage** out, int width, int height) {
    return vips_perlin(out, width, height, NULL);
}

int vipsgen_perlin_with_options(VipsImage** out, int width, int height, int cell_size, gboolean uchar, int seed) {
    VipsOperation *operation = vips_operation_new("perlin");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "width", width, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "height", height, NULL) ||
        set_int_param(operation, "cell_size", cell_size) ||
        set_bool_param(operation, "uchar", uchar) ||
        set_int_param(operation, "seed", seed)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_switch(VipsImage** tests, VipsImage** out, int n) {
    return vips_switch(tests, out, n, NULL);
}

int vipsgen_csvload(const char* filename, VipsImage** out) {
    return vips_csvload(filename, out, NULL);
}

int vipsgen_csvload_with_options(const char* filename, VipsImage** out, int skip, int lines, const char* whitespace, const char* separator, gboolean memory, VipsAccess access, VipsFailOn fail_on, gboolean revalidate) {
    VipsOperation *operation = vips_operation_new("csvload");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "filename", filename, NULL) ||
        set_int_param(operation, "skip", skip) ||
        set_int_param(operation, "lines", lines) ||
        set_string_param(operation, "whitespace", whitespace) ||
        set_string_param(operation, "separator", separator) ||
        set_bool_param(operation, "memory", memory) ||
        set_int_param(operation, "access", access) ||
        set_int_param(operation, "fail_on", fail_on) ||
        set_bool_param(operation, "revalidate", revalidate)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_csvload_source(VipsSourceCustom* source, VipsImage** out) {
    return vips_csvload_source((VipsSource*) source, out, NULL);
}

int vipsgen_csvload_source_with_options(VipsSourceCustom* source, VipsImage** out, int skip, int lines, const char* whitespace, const char* separator, gboolean memory, VipsAccess access, VipsFailOn fail_on, gboolean revalidate) {
    VipsOperation *operation = vips_operation_new("csvload_source");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "source", (VipsSource*)source, NULL) ||
        set_int_param(operation, "skip", skip) ||
        set_int_param(operation, "lines", lines) ||
        set_string_param(operation, "whitespace", whitespace) ||
        set_string_param(operation, "separator", separator) ||
        set_bool_param(operation, "memory", memory) ||
        set_int_param(operation, "access", access) ||
        set_int_param(operation, "fail_on", fail_on) ||
        set_bool_param(operation, "revalidate", revalidate)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_matrixload(const char* filename, VipsImage** out) {
    return vips_matrixload(filename, out, NULL);
}

int vipsgen_matrixload_with_options(const char* filename, VipsImage** out, gboolean memory, VipsAccess access, VipsFailOn fail_on, gboolean revalidate) {
    VipsOperation *operation = vips_operation_new("matrixload");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "filename", filename, NULL) ||
        set_bool_param(operation, "memory", memory) ||
        set_int_param(operation, "access", access) ||
        set_int_param(operation, "fail_on", fail_on) ||
        set_bool_param(operation, "revalidate", revalidate)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_matrixload_source(VipsSourceCustom* source, VipsImage** out) {
    return vips_matrixload_source((VipsSource*) source, out, NULL);
}

int vipsgen_matrixload_source_with_options(VipsSourceCustom* source, VipsImage** out, gboolean memory, VipsAccess access, VipsFailOn fail_on, gboolean revalidate) {
    VipsOperation *operation = vips_operation_new("matrixload_source");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "source", (VipsSource*)source, NULL) ||
        set_bool_param(operation, "memory", memory) ||
        set_int_param(operation, "access", access) ||
        set_int_param(operation, "fail_on", fail_on) ||
        set_bool_param(operation, "revalidate", revalidate)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_rawload(const char* filename, VipsImage** out, int width, int height, int bands) {
    return vips_rawload(filename, out, width, height, bands, NULL);
}

int vipsgen_rawload_with_options(const char* filename, VipsImage** out, int width, int height, int bands, guint64 offset, VipsBandFormat format, VipsInterpretation interpretation, gboolean memory, VipsAccess access, VipsFailOn fail_on, gboolean revalidate) {
    VipsOperation *operation = vips_operation_new("rawload");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "filename", filename, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "width", width, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "height", height, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "bands", bands, NULL) ||
        set_guint64_param(operation, "offset", offset) ||
        set_int_param(operation, "format", format) ||
        set_int_param(operation, "interpretation", interpretation) ||
        set_bool_param(operation, "memory", memory) ||
        set_int_param(operation, "access", access) ||
        set_int_param(operation, "fail_on", fail_on) ||
        set_bool_param(operation, "revalidate", revalidate)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_vipsload(const char* filename, VipsImage** out) {
    return vips_vipsload(filename, out, NULL);
}

int vipsgen_vipsload_with_options(const char* filename, VipsImage** out, gboolean memory, VipsAccess access, VipsFailOn fail_on, gboolean revalidate) {
    VipsOperation *operation = vips_operation_new("vipsload");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "filename", filename, NULL) ||
        set_bool_param(operation, "memory", memory) ||
        set_int_param(operation, "access", access) ||
        set_int_param(operation, "fail_on", fail_on) ||
        set_bool_param(operation, "revalidate", revalidate)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_vipsload_source(VipsSourceCustom* source, VipsImage** out) {
    return vips_vipsload_source((VipsSource*) source, out, NULL);
}

int vipsgen_vipsload_source_with_options(VipsSourceCustom* source, VipsImage** out, gboolean memory, VipsAccess access, VipsFailOn fail_on, gboolean revalidate) {
    VipsOperation *operation = vips_operation_new("vipsload_source");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "source", (VipsSource*)source, NULL) ||
        set_bool_param(operation, "memory", memory) ||
        set_int_param(operation, "access", access) ||
        set_int_param(operation, "fail_on", fail_on) ||
        set_bool_param(operation, "revalidate", revalidate)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_analyzeload(const char* filename, VipsImage** out) {
    return vips_analyzeload(filename, out, NULL);
}

int vipsgen_analyzeload_with_options(const char* filename, VipsImage** out, gboolean memory, VipsAccess access, VipsFailOn fail_on, gboolean revalidate) {
    VipsOperation *operation = vips_operation_new("analyzeload");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "filename", filename, NULL) ||
        set_bool_param(operation, "memory", memory) ||
        set_int_param(operation, "access", access) ||
        set_int_param(operation, "fail_on", fail_on) ||
        set_bool_param(operation, "revalidate", revalidate)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_ppmload(const char* filename, VipsImage** out) {
    return vips_ppmload(filename, out, NULL);
}

int vipsgen_ppmload_with_options(const char* filename, VipsImage** out, gboolean memory, VipsAccess access, VipsFailOn fail_on, gboolean revalidate) {
    VipsOperation *operation = vips_operation_new("ppmload");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "filename", filename, NULL) ||
        set_bool_param(operation, "memory", memory) ||
        set_int_param(operation, "access", access) ||
        set_int_param(operation, "fail_on", fail_on) ||
        set_bool_param(operation, "revalidate", revalidate)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_ppmload_source(VipsSourceCustom* source, VipsImage** out) {
    return vips_ppmload_source((VipsSource*) source, out, NULL);
}

int vipsgen_ppmload_source_with_options(VipsSourceCustom* source, VipsImage** out, gboolean memory, VipsAccess access, VipsFailOn fail_on, gboolean revalidate) {
    VipsOperation *operation = vips_operation_new("ppmload_source");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "source", (VipsSource*)source, NULL) ||
        set_bool_param(operation, "memory", memory) ||
        set_int_param(operation, "access", access) ||
        set_int_param(operation, "fail_on", fail_on) ||
        set_bool_param(operation, "revalidate", revalidate)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_radload(const char* filename, VipsImage** out) {
    return vips_radload(filename, out, NULL);
}

int vipsgen_radload_with_options(const char* filename, VipsImage** out, gboolean memory, VipsAccess access, VipsFailOn fail_on, gboolean revalidate) {
    VipsOperation *operation = vips_operation_new("radload");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "filename", filename, NULL) ||
        set_bool_param(operation, "memory", memory) ||
        set_int_param(operation, "access", access) ||
        set_int_param(operation, "fail_on", fail_on) ||
        set_bool_param(operation, "revalidate", revalidate)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_radload_buffer(void* buf, size_t len, VipsImage** out) {
    return vips_radload_buffer(buf, len, out, NULL);
}

int vipsgen_radload_buffer_with_options(void* buf, size_t len, VipsImage** out, gboolean memory, VipsAccess access, VipsFailOn fail_on, gboolean revalidate) {
    VipsOperation *operation = vips_operation_new("radload_buffer");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "buf", buf, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "len", len, NULL) ||
        set_bool_param(operation, "memory", memory) ||
        set_int_param(operation, "access", access) ||
        set_int_param(operation, "fail_on", fail_on) ||
        set_bool_param(operation, "revalidate", revalidate)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_radload_source(VipsSourceCustom* source, VipsImage** out) {
    return vips_radload_source((VipsSource*) source, out, NULL);
}

int vipsgen_radload_source_with_options(VipsSourceCustom* source, VipsImage** out, gboolean memory, VipsAccess access, VipsFailOn fail_on, gboolean revalidate) {
    VipsOperation *operation = vips_operation_new("radload_source");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "source", (VipsSource*)source, NULL) ||
        set_bool_param(operation, "memory", memory) ||
        set_int_param(operation, "access", access) ||
        set_int_param(operation, "fail_on", fail_on) ||
        set_bool_param(operation, "revalidate", revalidate)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_svgload(const char* filename, VipsImage** out) {
    return vips_svgload(filename, out, NULL);
}

int vipsgen_svgload_with_options(const char* filename, VipsImage** out, double dpi, double scale, gboolean unlimited, gboolean memory, VipsAccess access, VipsFailOn fail_on, gboolean revalidate) {
    VipsOperation *operation = vips_operation_new("svgload");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "filename", filename, NULL) ||
        set_double_param(operation, "dpi", dpi) ||
        set_double_param(operation, "scale", scale) ||
        set_bool_param(operation, "unlimited", unlimited) ||
        set_bool_param(operation, "memory", memory) ||
        set_int_param(operation, "access", access) ||
        set_int_param(operation, "fail_on", fail_on) ||
        set_bool_param(operation, "revalidate", revalidate)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_svgload_buffer(void* buf, size_t len, VipsImage** out) {
    return vips_svgload_buffer(buf, len, out, NULL);
}

int vipsgen_svgload_buffer_with_options(void* buf, size_t len, VipsImage** out, double dpi, double scale, gboolean unlimited, gboolean memory, VipsAccess access, VipsFailOn fail_on, gboolean revalidate) {
    VipsOperation *operation = vips_operation_new("svgload_buffer");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "buf", buf, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "len", len, NULL) ||
        set_double_param(operation, "dpi", dpi) ||
        set_double_param(operation, "scale", scale) ||
        set_bool_param(operation, "unlimited", unlimited) ||
        set_bool_param(operation, "memory", memory) ||
        set_int_param(operation, "access", access) ||
        set_int_param(operation, "fail_on", fail_on) ||
        set_bool_param(operation, "revalidate", revalidate)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_svgload_source(VipsSourceCustom* source, VipsImage** out) {
    return vips_svgload_source((VipsSource*) source, out, NULL);
}

int vipsgen_svgload_source_with_options(VipsSourceCustom* source, VipsImage** out, double dpi, double scale, gboolean unlimited, gboolean memory, VipsAccess access, VipsFailOn fail_on, gboolean revalidate) {
    VipsOperation *operation = vips_operation_new("svgload_source");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "source", (VipsSource*)source, NULL) ||
        set_double_param(operation, "dpi", dpi) ||
        set_double_param(operation, "scale", scale) ||
        set_bool_param(operation, "unlimited", unlimited) ||
        set_bool_param(operation, "memory", memory) ||
        set_int_param(operation, "access", access) ||
        set_int_param(operation, "fail_on", fail_on) ||
        set_bool_param(operation, "revalidate", revalidate)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_jp2kload(const char* filename, VipsImage** out) {
    return vips_jp2kload(filename, out, NULL);
}

int vipsgen_jp2kload_with_options(const char* filename, VipsImage** out, int page, gboolean memory, VipsAccess access, VipsFailOn fail_on, gboolean revalidate) {
    VipsOperation *operation = vips_operation_new("jp2kload");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "filename", filename, NULL) ||
        set_int_param(operation, "page", page) ||
        set_bool_param(operation, "memory", memory) ||
        set_int_param(operation, "access", access) ||
        set_int_param(operation, "fail_on", fail_on) ||
        set_bool_param(operation, "revalidate", revalidate)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_jp2kload_buffer(void* buf, size_t len, VipsImage** out) {
    return vips_jp2kload_buffer(buf, len, out, NULL);
}

int vipsgen_jp2kload_buffer_with_options(void* buf, size_t len, VipsImage** out, int page, gboolean memory, VipsAccess access, VipsFailOn fail_on, gboolean revalidate) {
    VipsOperation *operation = vips_operation_new("jp2kload_buffer");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "buf", buf, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "len", len, NULL) ||
        set_int_param(operation, "page", page) ||
        set_bool_param(operation, "memory", memory) ||
        set_int_param(operation, "access", access) ||
        set_int_param(operation, "fail_on", fail_on) ||
        set_bool_param(operation, "revalidate", revalidate)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_jp2kload_source(VipsSourceCustom* source, VipsImage** out) {
    return vips_jp2kload_source((VipsSource*) source, out, NULL);
}

int vipsgen_jp2kload_source_with_options(VipsSourceCustom* source, VipsImage** out, int page, gboolean memory, VipsAccess access, VipsFailOn fail_on, gboolean revalidate) {
    VipsOperation *operation = vips_operation_new("jp2kload_source");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "source", (VipsSource*)source, NULL) ||
        set_int_param(operation, "page", page) ||
        set_bool_param(operation, "memory", memory) ||
        set_int_param(operation, "access", access) ||
        set_int_param(operation, "fail_on", fail_on) ||
        set_bool_param(operation, "revalidate", revalidate)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_gifload(const char* filename, VipsImage** out) {
    return vips_gifload(filename, out, NULL);
}

int vipsgen_gifload_with_options(const char* filename, VipsImage** out, int n, int page, gboolean memory, VipsAccess access, VipsFailOn fail_on, gboolean revalidate) {
    VipsOperation *operation = vips_operation_new("gifload");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "filename", filename, NULL) ||
        set_int_param(operation, "n", n) ||
        set_int_param(operation, "page", page) ||
        set_bool_param(operation, "memory", memory) ||
        set_int_param(operation, "access", access) ||
        set_int_param(operation, "fail_on", fail_on) ||
        set_bool_param(operation, "revalidate", revalidate)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_gifload_buffer(void* buf, size_t len, VipsImage** out) {
    return vips_gifload_buffer(buf, len, out, NULL);
}

int vipsgen_gifload_buffer_with_options(void* buf, size_t len, VipsImage** out, int n, int page, gboolean memory, VipsAccess access, VipsFailOn fail_on, gboolean revalidate) {
    VipsOperation *operation = vips_operation_new("gifload_buffer");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "buf", buf, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "len", len, NULL) ||
        set_int_param(operation, "n", n) ||
        set_int_param(operation, "page", page) ||
        set_bool_param(operation, "memory", memory) ||
        set_int_param(operation, "access", access) ||
        set_int_param(operation, "fail_on", fail_on) ||
        set_bool_param(operation, "revalidate", revalidate)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_gifload_source(VipsSourceCustom* source, VipsImage** out) {
    return vips_gifload_source((VipsSource*) source, out, NULL);
}

int vipsgen_gifload_source_with_options(VipsSourceCustom* source, VipsImage** out, int n, int page, gboolean memory, VipsAccess access, VipsFailOn fail_on, gboolean revalidate) {
    VipsOperation *operation = vips_operation_new("gifload_source");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "source", (VipsSource*)source, NULL) ||
        set_int_param(operation, "n", n) ||
        set_int_param(operation, "page", page) ||
        set_bool_param(operation, "memory", memory) ||
        set_int_param(operation, "access", access) ||
        set_int_param(operation, "fail_on", fail_on) ||
        set_bool_param(operation, "revalidate", revalidate)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_pngload(const char* filename, VipsImage** out) {
    return vips_pngload(filename, out, NULL);
}

int vipsgen_pngload_with_options(const char* filename, VipsImage** out, gboolean unlimited, gboolean memory, VipsAccess access, VipsFailOn fail_on, gboolean revalidate) {
    VipsOperation *operation = vips_operation_new("pngload");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "filename", filename, NULL) ||
        set_bool_param(operation, "unlimited", unlimited) ||
        set_bool_param(operation, "memory", memory) ||
        set_int_param(operation, "access", access) ||
        set_int_param(operation, "fail_on", fail_on) ||
        set_bool_param(operation, "revalidate", revalidate)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_pngload_buffer(void* buf, size_t len, VipsImage** out) {
    return vips_pngload_buffer(buf, len, out, NULL);
}

int vipsgen_pngload_buffer_with_options(void* buf, size_t len, VipsImage** out, gboolean unlimited, gboolean memory, VipsAccess access, VipsFailOn fail_on, gboolean revalidate) {
    VipsOperation *operation = vips_operation_new("pngload_buffer");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "buf", buf, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "len", len, NULL) ||
        set_bool_param(operation, "unlimited", unlimited) ||
        set_bool_param(operation, "memory", memory) ||
        set_int_param(operation, "access", access) ||
        set_int_param(operation, "fail_on", fail_on) ||
        set_bool_param(operation, "revalidate", revalidate)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_pngload_source(VipsSourceCustom* source, VipsImage** out) {
    return vips_pngload_source((VipsSource*) source, out, NULL);
}

int vipsgen_pngload_source_with_options(VipsSourceCustom* source, VipsImage** out, gboolean unlimited, gboolean memory, VipsAccess access, VipsFailOn fail_on, gboolean revalidate) {
    VipsOperation *operation = vips_operation_new("pngload_source");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "source", (VipsSource*)source, NULL) ||
        set_bool_param(operation, "unlimited", unlimited) ||
        set_bool_param(operation, "memory", memory) ||
        set_int_param(operation, "access", access) ||
        set_int_param(operation, "fail_on", fail_on) ||
        set_bool_param(operation, "revalidate", revalidate)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_jpegload(const char* filename, VipsImage** out) {
    return vips_jpegload(filename, out, NULL);
}

int vipsgen_jpegload_with_options(const char* filename, VipsImage** out, int shrink, gboolean autorotate, gboolean unlimited, gboolean memory, VipsAccess access, VipsFailOn fail_on, gboolean revalidate) {
    VipsOperation *operation = vips_operation_new("jpegload");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "filename", filename, NULL) ||
        set_int_param(operation, "shrink", shrink) ||
        set_bool_param(operation, "autorotate", autorotate) ||
        set_bool_param(operation, "unlimited", unlimited) ||
        set_bool_param(operation, "memory", memory) ||
        set_int_param(operation, "access", access) ||
        set_int_param(operation, "fail_on", fail_on) ||
        set_bool_param(operation, "revalidate", revalidate)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_jpegload_buffer(void* buf, size_t len, VipsImage** out) {
    return vips_jpegload_buffer(buf, len, out, NULL);
}

int vipsgen_jpegload_buffer_with_options(void* buf, size_t len, VipsImage** out, int shrink, gboolean autorotate, gboolean unlimited, gboolean memory, VipsAccess access, VipsFailOn fail_on, gboolean revalidate) {
    VipsOperation *operation = vips_operation_new("jpegload_buffer");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "buf", buf, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "len", len, NULL) ||
        set_int_param(operation, "shrink", shrink) ||
        set_bool_param(operation, "autorotate", autorotate) ||
        set_bool_param(operation, "unlimited", unlimited) ||
        set_bool_param(operation, "memory", memory) ||
        set_int_param(operation, "access", access) ||
        set_int_param(operation, "fail_on", fail_on) ||
        set_bool_param(operation, "revalidate", revalidate)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_jpegload_source(VipsSourceCustom* source, VipsImage** out) {
    return vips_jpegload_source((VipsSource*) source, out, NULL);
}

int vipsgen_jpegload_source_with_options(VipsSourceCustom* source, VipsImage** out, int shrink, gboolean autorotate, gboolean unlimited, gboolean memory, VipsAccess access, VipsFailOn fail_on, gboolean revalidate) {
    VipsOperation *operation = vips_operation_new("jpegload_source");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "source", (VipsSource*)source, NULL) ||
        set_int_param(operation, "shrink", shrink) ||
        set_bool_param(operation, "autorotate", autorotate) ||
        set_bool_param(operation, "unlimited", unlimited) ||
        set_bool_param(operation, "memory", memory) ||
        set_int_param(operation, "access", access) ||
        set_int_param(operation, "fail_on", fail_on) ||
        set_bool_param(operation, "revalidate", revalidate)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_webpload(const char* filename, VipsImage** out) {
    return vips_webpload(filename, out, NULL);
}

int vipsgen_webpload_with_options(const char* filename, VipsImage** out, int page, int n, double scale, gboolean memory, VipsAccess access, VipsFailOn fail_on, gboolean revalidate) {
    VipsOperation *operation = vips_operation_new("webpload");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "filename", filename, NULL) ||
        set_int_param(operation, "page", page) ||
        set_int_param(operation, "n", n) ||
        set_double_param(operation, "scale", scale) ||
        set_bool_param(operation, "memory", memory) ||
        set_int_param(operation, "access", access) ||
        set_int_param(operation, "fail_on", fail_on) ||
        set_bool_param(operation, "revalidate", revalidate)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_webpload_buffer(void* buf, size_t len, VipsImage** out) {
    return vips_webpload_buffer(buf, len, out, NULL);
}

int vipsgen_webpload_buffer_with_options(void* buf, size_t len, VipsImage** out, int page, int n, double scale, gboolean memory, VipsAccess access, VipsFailOn fail_on, gboolean revalidate) {
    VipsOperation *operation = vips_operation_new("webpload_buffer");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "buf", buf, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "len", len, NULL) ||
        set_int_param(operation, "page", page) ||
        set_int_param(operation, "n", n) ||
        set_double_param(operation, "scale", scale) ||
        set_bool_param(operation, "memory", memory) ||
        set_int_param(operation, "access", access) ||
        set_int_param(operation, "fail_on", fail_on) ||
        set_bool_param(operation, "revalidate", revalidate)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_webpload_source(VipsSourceCustom* source, VipsImage** out) {
    return vips_webpload_source((VipsSource*) source, out, NULL);
}

int vipsgen_webpload_source_with_options(VipsSourceCustom* source, VipsImage** out, int page, int n, double scale, gboolean memory, VipsAccess access, VipsFailOn fail_on, gboolean revalidate) {
    VipsOperation *operation = vips_operation_new("webpload_source");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "source", (VipsSource*)source, NULL) ||
        set_int_param(operation, "page", page) ||
        set_int_param(operation, "n", n) ||
        set_double_param(operation, "scale", scale) ||
        set_bool_param(operation, "memory", memory) ||
        set_int_param(operation, "access", access) ||
        set_int_param(operation, "fail_on", fail_on) ||
        set_bool_param(operation, "revalidate", revalidate)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_tiffload(const char* filename, VipsImage** out) {
    return vips_tiffload(filename, out, NULL);
}

int vipsgen_tiffload_with_options(const char* filename, VipsImage** out, int page, int subifd, int n, gboolean autorotate, gboolean memory, VipsAccess access, VipsFailOn fail_on, gboolean revalidate) {
    VipsOperation *operation = vips_operation_new("tiffload");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "filename", filename, NULL) ||
        set_int_param(operation, "page", page) ||
        set_int_param(operation, "subifd", subifd) ||
        set_int_param(operation, "n", n) ||
        set_bool_param(operation, "autorotate", autorotate) ||
        set_bool_param(operation, "memory", memory) ||
        set_int_param(operation, "access", access) ||
        set_int_param(operation, "fail_on", fail_on) ||
        set_bool_param(operation, "revalidate", revalidate)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_tiffload_buffer(void* buf, size_t len, VipsImage** out) {
    return vips_tiffload_buffer(buf, len, out, NULL);
}

int vipsgen_tiffload_buffer_with_options(void* buf, size_t len, VipsImage** out, int page, int subifd, int n, gboolean autorotate, gboolean memory, VipsAccess access, VipsFailOn fail_on, gboolean revalidate) {
    VipsOperation *operation = vips_operation_new("tiffload_buffer");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "buf", buf, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "len", len, NULL) ||
        set_int_param(operation, "page", page) ||
        set_int_param(operation, "subifd", subifd) ||
        set_int_param(operation, "n", n) ||
        set_bool_param(operation, "autorotate", autorotate) ||
        set_bool_param(operation, "memory", memory) ||
        set_int_param(operation, "access", access) ||
        set_int_param(operation, "fail_on", fail_on) ||
        set_bool_param(operation, "revalidate", revalidate)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_tiffload_source(VipsSourceCustom* source, VipsImage** out) {
    return vips_tiffload_source((VipsSource*) source, out, NULL);
}

int vipsgen_tiffload_source_with_options(VipsSourceCustom* source, VipsImage** out, int page, int subifd, int n, gboolean autorotate, gboolean memory, VipsAccess access, VipsFailOn fail_on, gboolean revalidate) {
    VipsOperation *operation = vips_operation_new("tiffload_source");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "source", (VipsSource*)source, NULL) ||
        set_int_param(operation, "page", page) ||
        set_int_param(operation, "subifd", subifd) ||
        set_int_param(operation, "n", n) ||
        set_bool_param(operation, "autorotate", autorotate) ||
        set_bool_param(operation, "memory", memory) ||
        set_int_param(operation, "access", access) ||
        set_int_param(operation, "fail_on", fail_on) ||
        set_bool_param(operation, "revalidate", revalidate)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_fitsload(const char* filename, VipsImage** out) {
    return vips_fitsload(filename, out, NULL);
}

int vipsgen_fitsload_with_options(const char* filename, VipsImage** out, gboolean memory, VipsAccess access, VipsFailOn fail_on, gboolean revalidate) {
    VipsOperation *operation = vips_operation_new("fitsload");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "filename", filename, NULL) ||
        set_bool_param(operation, "memory", memory) ||
        set_int_param(operation, "access", access) ||
        set_int_param(operation, "fail_on", fail_on) ||
        set_bool_param(operation, "revalidate", revalidate)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_openexrload(const char* filename, VipsImage** out) {
    return vips_openexrload(filename, out, NULL);
}

int vipsgen_openexrload_with_options(const char* filename, VipsImage** out, gboolean memory, VipsAccess access, VipsFailOn fail_on, gboolean revalidate) {
    VipsOperation *operation = vips_operation_new("openexrload");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "filename", filename, NULL) ||
        set_bool_param(operation, "memory", memory) ||
        set_int_param(operation, "access", access) ||
        set_int_param(operation, "fail_on", fail_on) ||
        set_bool_param(operation, "revalidate", revalidate)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_magickload(const char* filename, VipsImage** out) {
    return vips_magickload(filename, out, NULL);
}

int vipsgen_magickload_with_options(const char* filename, VipsImage** out, const char* density, int page, int n, gboolean memory, VipsAccess access, VipsFailOn fail_on, gboolean revalidate) {
    VipsOperation *operation = vips_operation_new("magickload");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "filename", filename, NULL) ||
        set_string_param(operation, "density", density) ||
        set_int_param(operation, "page", page) ||
        set_int_param(operation, "n", n) ||
        set_bool_param(operation, "memory", memory) ||
        set_int_param(operation, "access", access) ||
        set_int_param(operation, "fail_on", fail_on) ||
        set_bool_param(operation, "revalidate", revalidate)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_magickload_buffer(void* buf, size_t len, VipsImage** out) {
    return vips_magickload_buffer(buf, len, out, NULL);
}

int vipsgen_magickload_buffer_with_options(void* buf, size_t len, VipsImage** out, const char* density, int page, int n, gboolean memory, VipsAccess access, VipsFailOn fail_on, gboolean revalidate) {
    VipsOperation *operation = vips_operation_new("magickload_buffer");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "buf", buf, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "len", len, NULL) ||
        set_string_param(operation, "density", density) ||
        set_int_param(operation, "page", page) ||
        set_int_param(operation, "n", n) ||
        set_bool_param(operation, "memory", memory) ||
        set_int_param(operation, "access", access) ||
        set_int_param(operation, "fail_on", fail_on) ||
        set_bool_param(operation, "revalidate", revalidate)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_heifload(const char* filename, VipsImage** out) {
    return vips_heifload(filename, out, NULL);
}

int vipsgen_heifload_with_options(const char* filename, VipsImage** out, int page, int n, gboolean thumbnail, gboolean unlimited, gboolean memory, VipsAccess access, VipsFailOn fail_on, gboolean revalidate) {
    VipsOperation *operation = vips_operation_new("heifload");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "filename", filename, NULL) ||
        set_int_param(operation, "page", page) ||
        set_int_param(operation, "n", n) ||
        set_bool_param(operation, "thumbnail", thumbnail) ||
        set_bool_param(operation, "unlimited", unlimited) ||
        set_bool_param(operation, "memory", memory) ||
        set_int_param(operation, "access", access) ||
        set_int_param(operation, "fail_on", fail_on) ||
        set_bool_param(operation, "revalidate", revalidate)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_heifload_buffer(void* buf, size_t len, VipsImage** out) {
    return vips_heifload_buffer(buf, len, out, NULL);
}

int vipsgen_heifload_buffer_with_options(void* buf, size_t len, VipsImage** out, int page, int n, gboolean thumbnail, gboolean unlimited, gboolean memory, VipsAccess access, VipsFailOn fail_on, gboolean revalidate) {
    VipsOperation *operation = vips_operation_new("heifload_buffer");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "buf", buf, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "len", len, NULL) ||
        set_int_param(operation, "page", page) ||
        set_int_param(operation, "n", n) ||
        set_bool_param(operation, "thumbnail", thumbnail) ||
        set_bool_param(operation, "unlimited", unlimited) ||
        set_bool_param(operation, "memory", memory) ||
        set_int_param(operation, "access", access) ||
        set_int_param(operation, "fail_on", fail_on) ||
        set_bool_param(operation, "revalidate", revalidate)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_heifload_source(VipsSourceCustom* source, VipsImage** out) {
    return vips_heifload_source((VipsSource*) source, out, NULL);
}

int vipsgen_heifload_source_with_options(VipsSourceCustom* source, VipsImage** out, int page, int n, gboolean thumbnail, gboolean unlimited, gboolean memory, VipsAccess access, VipsFailOn fail_on, gboolean revalidate) {
    VipsOperation *operation = vips_operation_new("heifload_source");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "source", (VipsSource*)source, NULL) ||
        set_int_param(operation, "page", page) ||
        set_int_param(operation, "n", n) ||
        set_bool_param(operation, "thumbnail", thumbnail) ||
        set_bool_param(operation, "unlimited", unlimited) ||
        set_bool_param(operation, "memory", memory) ||
        set_int_param(operation, "access", access) ||
        set_int_param(operation, "fail_on", fail_on) ||
        set_bool_param(operation, "revalidate", revalidate)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_openslideload(const char* filename, VipsImage** out) {
    return vips_openslideload(filename, out, NULL);
}

int vipsgen_openslideload_with_options(const char* filename, VipsImage** out, int level, gboolean autocrop, const char* associated, gboolean attach_associated, gboolean rgb, gboolean memory, VipsAccess access, VipsFailOn fail_on, gboolean revalidate) {
    VipsOperation *operation = vips_operation_new("openslideload");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "filename", filename, NULL) ||
        set_int_param(operation, "level", level) ||
        set_bool_param(operation, "autocrop", autocrop) ||
        set_string_param(operation, "associated", associated) ||
        set_bool_param(operation, "attach_associated", attach_associated) ||
        set_bool_param(operation, "rgb", rgb) ||
        set_bool_param(operation, "memory", memory) ||
        set_int_param(operation, "access", access) ||
        set_int_param(operation, "fail_on", fail_on) ||
        set_bool_param(operation, "revalidate", revalidate)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_openslideload_source(VipsSourceCustom* source, VipsImage** out) {
    return vips_openslideload_source((VipsSource*) source, out, NULL);
}

int vipsgen_openslideload_source_with_options(VipsSourceCustom* source, VipsImage** out, int level, gboolean autocrop, const char* associated, gboolean attach_associated, gboolean rgb, gboolean memory, VipsAccess access, VipsFailOn fail_on, gboolean revalidate) {
    VipsOperation *operation = vips_operation_new("openslideload_source");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "source", (VipsSource*)source, NULL) ||
        set_int_param(operation, "level", level) ||
        set_bool_param(operation, "autocrop", autocrop) ||
        set_string_param(operation, "associated", associated) ||
        set_bool_param(operation, "attach_associated", attach_associated) ||
        set_bool_param(operation, "rgb", rgb) ||
        set_bool_param(operation, "memory", memory) ||
        set_int_param(operation, "access", access) ||
        set_int_param(operation, "fail_on", fail_on) ||
        set_bool_param(operation, "revalidate", revalidate)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_pdfload(const char* filename, VipsImage** out) {
    return vips_pdfload(filename, out, NULL);
}

int vipsgen_pdfload_with_options(const char* filename, VipsImage** out, int page, int n, double dpi, double scale, double* background, int background_n, const char* password, gboolean memory, VipsAccess access, VipsFailOn fail_on, gboolean revalidate) {
    VipsOperation *operation = vips_operation_new("pdfload");
    if (!operation) return 1;
    VipsArrayDouble *background_array = NULL;
    if (background != NULL && background_n > 0) { background_array = vips_array_double_new(background, background_n); }
    if (
        vips_object_set(VIPS_OBJECT(operation), "filename", filename, NULL) ||
        set_int_param(operation, "page", page) ||
        set_int_param(operation, "n", n) ||
        set_double_param(operation, "dpi", dpi) ||
        set_double_param(operation, "scale", scale) ||
        set_array_double_param(operation, "background", background_array) ||
        set_string_param(operation, "password", password) ||
        set_bool_param(operation, "memory", memory) ||
        set_int_param(operation, "access", access) ||
        set_int_param(operation, "fail_on", fail_on) ||
        set_bool_param(operation, "revalidate", revalidate)
    ) {
        g_object_unref(operation);
        if (background_array != NULL) { vips_area_unref(VIPS_AREA(background_array)); }
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    if (background_array != NULL) { vips_area_unref(VIPS_AREA(background_array)); }
    return result;
}

int vipsgen_pdfload_buffer(void* buf, size_t len, VipsImage** out) {
    return vips_pdfload_buffer(buf, len, out, NULL);
}

int vipsgen_pdfload_buffer_with_options(void* buf, size_t len, VipsImage** out, int page, int n, double dpi, double scale, double* background, int background_n, const char* password, gboolean memory, VipsAccess access, VipsFailOn fail_on, gboolean revalidate) {
    VipsOperation *operation = vips_operation_new("pdfload_buffer");
    if (!operation) return 1;
    VipsArrayDouble *background_array = NULL;
    if (background != NULL && background_n > 0) { background_array = vips_array_double_new(background, background_n); }
    if (
        vips_object_set(VIPS_OBJECT(operation), "buf", buf, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "len", len, NULL) ||
        set_int_param(operation, "page", page) ||
        set_int_param(operation, "n", n) ||
        set_double_param(operation, "dpi", dpi) ||
        set_double_param(operation, "scale", scale) ||
        set_array_double_param(operation, "background", background_array) ||
        set_string_param(operation, "password", password) ||
        set_bool_param(operation, "memory", memory) ||
        set_int_param(operation, "access", access) ||
        set_int_param(operation, "fail_on", fail_on) ||
        set_bool_param(operation, "revalidate", revalidate)
    ) {
        g_object_unref(operation);
        if (background_array != NULL) { vips_area_unref(VIPS_AREA(background_array)); }
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    if (background_array != NULL) { vips_area_unref(VIPS_AREA(background_array)); }
    return result;
}

int vipsgen_pdfload_source(VipsSourceCustom* source, VipsImage** out) {
    return vips_pdfload_source((VipsSource*) source, out, NULL);
}

int vipsgen_pdfload_source_with_options(VipsSourceCustom* source, VipsImage** out, int page, int n, double dpi, double scale, double* background, int background_n, const char* password, gboolean memory, VipsAccess access, VipsFailOn fail_on, gboolean revalidate) {
    VipsOperation *operation = vips_operation_new("pdfload_source");
    if (!operation) return 1;
    VipsArrayDouble *background_array = NULL;
    if (background != NULL && background_n > 0) { background_array = vips_array_double_new(background, background_n); }
    if (
        vips_object_set(VIPS_OBJECT(operation), "source", (VipsSource*)source, NULL) ||
        set_int_param(operation, "page", page) ||
        set_int_param(operation, "n", n) ||
        set_double_param(operation, "dpi", dpi) ||
        set_double_param(operation, "scale", scale) ||
        set_array_double_param(operation, "background", background_array) ||
        set_string_param(operation, "password", password) ||
        set_bool_param(operation, "memory", memory) ||
        set_int_param(operation, "access", access) ||
        set_int_param(operation, "fail_on", fail_on) ||
        set_bool_param(operation, "revalidate", revalidate)
    ) {
        g_object_unref(operation);
        if (background_array != NULL) { vips_area_unref(VIPS_AREA(background_array)); }
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    if (background_array != NULL) { vips_area_unref(VIPS_AREA(background_array)); }
    return result;
}

int vipsgen_csvsave(VipsImage* in, const char* filename) {
    return vips_csvsave(in, filename, NULL);
}

int vipsgen_csvsave_with_options(VipsImage* in, const char* filename, const char* separator, VipsForeignKeep keep, double* background, int background_n, int page_height, const char* profile) {
    VipsOperation *operation = vips_operation_new("csvsave");
    if (!operation) return 1;
    VipsArrayDouble *background_array = NULL;
    if (background != NULL && background_n > 0) { background_array = vips_array_double_new(background, background_n); }
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "filename", filename, NULL) ||
        set_string_param(operation, "separator", separator) ||
        set_int_param(operation, "keep", keep) ||
        set_array_double_param(operation, "background", background_array) ||
        set_int_param(operation, "page_height", page_height) ||
        set_string_param(operation, "profile", profile)
    ) {
        g_object_unref(operation);
        if (background_array != NULL) { vips_area_unref(VIPS_AREA(background_array)); }
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, NULL);
    if (background_array != NULL) { vips_area_unref(VIPS_AREA(background_array)); }
    return result;
}

int vipsgen_matrixsave(VipsImage* in, const char* filename) {
    return vips_matrixsave(in, filename, NULL);
}

int vipsgen_matrixsave_with_options(VipsImage* in, const char* filename, VipsForeignKeep keep, double* background, int background_n, int page_height, const char* profile) {
    VipsOperation *operation = vips_operation_new("matrixsave");
    if (!operation) return 1;
    VipsArrayDouble *background_array = NULL;
    if (background != NULL && background_n > 0) { background_array = vips_array_double_new(background, background_n); }
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "filename", filename, NULL) ||
        set_int_param(operation, "keep", keep) ||
        set_array_double_param(operation, "background", background_array) ||
        set_int_param(operation, "page_height", page_height) ||
        set_string_param(operation, "profile", profile)
    ) {
        g_object_unref(operation);
        if (background_array != NULL) { vips_area_unref(VIPS_AREA(background_array)); }
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, NULL);
    if (background_array != NULL) { vips_area_unref(VIPS_AREA(background_array)); }
    return result;
}

int vipsgen_matrixprint(VipsImage* in) {
    return vips_matrixprint(in, NULL);
}

int vipsgen_matrixprint_with_options(VipsImage* in, VipsForeignKeep keep, double* background, int background_n, int page_height, const char* profile) {
    VipsOperation *operation = vips_operation_new("matrixprint");
    if (!operation) return 1;
    VipsArrayDouble *background_array = NULL;
    if (background != NULL && background_n > 0) { background_array = vips_array_double_new(background, background_n); }
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        set_int_param(operation, "keep", keep) ||
        set_array_double_param(operation, "background", background_array) ||
        set_int_param(operation, "page_height", page_height) ||
        set_string_param(operation, "profile", profile)
    ) {
        g_object_unref(operation);
        if (background_array != NULL) { vips_area_unref(VIPS_AREA(background_array)); }
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, NULL);
    if (background_array != NULL) { vips_area_unref(VIPS_AREA(background_array)); }
    return result;
}

int vipsgen_rawsave(VipsImage* in, const char* filename) {
    return vips_rawsave(in, filename, NULL);
}

int vipsgen_rawsave_with_options(VipsImage* in, const char* filename, VipsForeignKeep keep, double* background, int background_n, int page_height, const char* profile) {
    VipsOperation *operation = vips_operation_new("rawsave");
    if (!operation) return 1;
    VipsArrayDouble *background_array = NULL;
    if (background != NULL && background_n > 0) { background_array = vips_array_double_new(background, background_n); }
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "filename", filename, NULL) ||
        set_int_param(operation, "keep", keep) ||
        set_array_double_param(operation, "background", background_array) ||
        set_int_param(operation, "page_height", page_height) ||
        set_string_param(operation, "profile", profile)
    ) {
        g_object_unref(operation);
        if (background_array != NULL) { vips_area_unref(VIPS_AREA(background_array)); }
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, NULL);
    if (background_array != NULL) { vips_area_unref(VIPS_AREA(background_array)); }
    return result;
}

int vipsgen_rawsave_buffer(VipsImage* in, void** buf, size_t* len) {
    return vips_rawsave_buffer(in, buf, len, NULL);
}

int vipsgen_rawsave_buffer_with_options(VipsImage* in, void** buf, size_t* len, VipsForeignKeep keep, double* background, int background_n, int page_height, const char* profile) {
    VipsOperation *operation = vips_operation_new("rawsave_buffer");
    if (!operation) return 1;
    VipsArrayDouble *background_array = NULL;
    if (background != NULL && background_n > 0) { background_array = vips_array_double_new(background, background_n); }
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        set_int_param(operation, "keep", keep) ||
        set_array_double_param(operation, "background", background_array) ||
        set_int_param(operation, "page_height", page_height) ||
        set_string_param(operation, "profile", profile)
    ) {
        g_object_unref(operation);
        if (background_array != NULL) { vips_area_unref(VIPS_AREA(background_array)); }
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "buffer", buf, "buffer_length", len, NULL);
    if (background_array != NULL) { vips_area_unref(VIPS_AREA(background_array)); }
    return result;
}

int vipsgen_vipssave(VipsImage* in, const char* filename) {
    return vips_vipssave(in, filename, NULL);
}

int vipsgen_vipssave_with_options(VipsImage* in, const char* filename, VipsForeignKeep keep, double* background, int background_n, int page_height, const char* profile) {
    VipsOperation *operation = vips_operation_new("vipssave");
    if (!operation) return 1;
    VipsArrayDouble *background_array = NULL;
    if (background != NULL && background_n > 0) { background_array = vips_array_double_new(background, background_n); }
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "filename", filename, NULL) ||
        set_int_param(operation, "keep", keep) ||
        set_array_double_param(operation, "background", background_array) ||
        set_int_param(operation, "page_height", page_height) ||
        set_string_param(operation, "profile", profile)
    ) {
        g_object_unref(operation);
        if (background_array != NULL) { vips_area_unref(VIPS_AREA(background_array)); }
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, NULL);
    if (background_array != NULL) { vips_area_unref(VIPS_AREA(background_array)); }
    return result;
}

int vipsgen_ppmsave(VipsImage* in, const char* filename) {
    return vips_ppmsave(in, filename, NULL);
}

int vipsgen_ppmsave_with_options(VipsImage* in, const char* filename, VipsForeignPpmFormat format, gboolean ascii, int bitdepth, VipsForeignKeep keep, double* background, int background_n, int page_height, const char* profile) {
    VipsOperation *operation = vips_operation_new("ppmsave");
    if (!operation) return 1;
    VipsArrayDouble *background_array = NULL;
    if (background != NULL && background_n > 0) { background_array = vips_array_double_new(background, background_n); }
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "filename", filename, NULL) ||
        set_int_param(operation, "format", format) ||
        set_bool_param(operation, "ascii", ascii) ||
        set_int_param(operation, "bitdepth", bitdepth) ||
        set_int_param(operation, "keep", keep) ||
        set_array_double_param(operation, "background", background_array) ||
        set_int_param(operation, "page_height", page_height) ||
        set_string_param(operation, "profile", profile)
    ) {
        g_object_unref(operation);
        if (background_array != NULL) { vips_area_unref(VIPS_AREA(background_array)); }
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, NULL);
    if (background_array != NULL) { vips_area_unref(VIPS_AREA(background_array)); }
    return result;
}

int vipsgen_radsave(VipsImage* in, const char* filename) {
    return vips_radsave(in, filename, NULL);
}

int vipsgen_radsave_with_options(VipsImage* in, const char* filename, VipsForeignKeep keep, double* background, int background_n, int page_height, const char* profile) {
    VipsOperation *operation = vips_operation_new("radsave");
    if (!operation) return 1;
    VipsArrayDouble *background_array = NULL;
    if (background != NULL && background_n > 0) { background_array = vips_array_double_new(background, background_n); }
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "filename", filename, NULL) ||
        set_int_param(operation, "keep", keep) ||
        set_array_double_param(operation, "background", background_array) ||
        set_int_param(operation, "page_height", page_height) ||
        set_string_param(operation, "profile", profile)
    ) {
        g_object_unref(operation);
        if (background_array != NULL) { vips_area_unref(VIPS_AREA(background_array)); }
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, NULL);
    if (background_array != NULL) { vips_area_unref(VIPS_AREA(background_array)); }
    return result;
}

int vipsgen_radsave_buffer(VipsImage* in, void** buf, size_t* len) {
    return vips_radsave_buffer(in, buf, len, NULL);
}

int vipsgen_radsave_buffer_with_options(VipsImage* in, void** buf, size_t* len, VipsForeignKeep keep, double* background, int background_n, int page_height, const char* profile) {
    VipsOperation *operation = vips_operation_new("radsave_buffer");
    if (!operation) return 1;
    VipsArrayDouble *background_array = NULL;
    if (background != NULL && background_n > 0) { background_array = vips_array_double_new(background, background_n); }
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        set_int_param(operation, "keep", keep) ||
        set_array_double_param(operation, "background", background_array) ||
        set_int_param(operation, "page_height", page_height) ||
        set_string_param(operation, "profile", profile)
    ) {
        g_object_unref(operation);
        if (background_array != NULL) { vips_area_unref(VIPS_AREA(background_array)); }
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "buffer", buf, "buffer_length", len, NULL);
    if (background_array != NULL) { vips_area_unref(VIPS_AREA(background_array)); }
    return result;
}

int vipsgen_jp2ksave(VipsImage* in, const char* filename) {
    return vips_jp2ksave(in, filename, NULL);
}

int vipsgen_jp2ksave_with_options(VipsImage* in, const char* filename, int tile_width, int tile_height, gboolean lossless, int Q, VipsForeignSubsample subsample_mode, VipsForeignKeep keep, double* background, int background_n, int page_height, const char* profile) {
    VipsOperation *operation = vips_operation_new("jp2ksave");
    if (!operation) return 1;
    VipsArrayDouble *background_array = NULL;
    if (background != NULL && background_n > 0) { background_array = vips_array_double_new(background, background_n); }
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "filename", filename, NULL) ||
        set_int_param(operation, "tile_width", tile_width) ||
        set_int_param(operation, "tile_height", tile_height) ||
        set_bool_param(operation, "lossless", lossless) ||
        set_int_param(operation, "Q", Q) ||
        set_int_param(operation, "subsample_mode", subsample_mode) ||
        set_int_param(operation, "keep", keep) ||
        set_array_double_param(operation, "background", background_array) ||
        set_int_param(operation, "page_height", page_height) ||
        set_string_param(operation, "profile", profile)
    ) {
        g_object_unref(operation);
        if (background_array != NULL) { vips_area_unref(VIPS_AREA(background_array)); }
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, NULL);
    if (background_array != NULL) { vips_area_unref(VIPS_AREA(background_array)); }
    return result;
}

int vipsgen_jp2ksave_buffer(VipsImage* in, void** buf, size_t* len) {
    return vips_jp2ksave_buffer(in, buf, len, NULL);
}

int vipsgen_jp2ksave_buffer_with_options(VipsImage* in, void** buf, size_t* len, int tile_width, int tile_height, gboolean lossless, int Q, VipsForeignSubsample subsample_mode, VipsForeignKeep keep, double* background, int background_n, int page_height, const char* profile) {
    VipsOperation *operation = vips_operation_new("jp2ksave_buffer");
    if (!operation) return 1;
    VipsArrayDouble *background_array = NULL;
    if (background != NULL && background_n > 0) { background_array = vips_array_double_new(background, background_n); }
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        set_int_param(operation, "tile_width", tile_width) ||
        set_int_param(operation, "tile_height", tile_height) ||
        set_bool_param(operation, "lossless", lossless) ||
        set_int_param(operation, "Q", Q) ||
        set_int_param(operation, "subsample_mode", subsample_mode) ||
        set_int_param(operation, "keep", keep) ||
        set_array_double_param(operation, "background", background_array) ||
        set_int_param(operation, "page_height", page_height) ||
        set_string_param(operation, "profile", profile)
    ) {
        g_object_unref(operation);
        if (background_array != NULL) { vips_area_unref(VIPS_AREA(background_array)); }
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "buffer", buf, "buffer_length", len, NULL);
    if (background_array != NULL) { vips_area_unref(VIPS_AREA(background_array)); }
    return result;
}

int vipsgen_gifsave(VipsImage* in, const char* filename) {
    return vips_gifsave(in, filename, NULL);
}

int vipsgen_gifsave_with_options(VipsImage* in, const char* filename, double dither, int effort, int bitdepth, double interframe_maxerror, gboolean reuse, double interpalette_maxerror, gboolean interlace, VipsForeignKeep keep, double* background, int background_n, int page_height, const char* profile) {
    VipsOperation *operation = vips_operation_new("gifsave");
    if (!operation) return 1;
    VipsArrayDouble *background_array = NULL;
    if (background != NULL && background_n > 0) { background_array = vips_array_double_new(background, background_n); }
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "filename", filename, NULL) ||
        set_double_param(operation, "dither", dither) ||
        set_int_param(operation, "effort", effort) ||
        set_int_param(operation, "bitdepth", bitdepth) ||
        set_double_param(operation, "interframe_maxerror", interframe_maxerror) ||
        set_bool_param(operation, "reuse", reuse) ||
        set_double_param(operation, "interpalette_maxerror", interpalette_maxerror) ||
        set_bool_param(operation, "interlace", interlace) ||
        set_int_param(operation, "keep", keep) ||
        set_array_double_param(operation, "background", background_array) ||
        set_int_param(operation, "page_height", page_height) ||
        set_string_param(operation, "profile", profile)
    ) {
        g_object_unref(operation);
        if (background_array != NULL) { vips_area_unref(VIPS_AREA(background_array)); }
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, NULL);
    if (background_array != NULL) { vips_area_unref(VIPS_AREA(background_array)); }
    return result;
}

int vipsgen_gifsave_buffer(VipsImage* in, void** buf, size_t* len) {
    return vips_gifsave_buffer(in, buf, len, NULL);
}

int vipsgen_gifsave_buffer_with_options(VipsImage* in, void** buf, size_t* len, double dither, int effort, int bitdepth, double interframe_maxerror, gboolean reuse, double interpalette_maxerror, gboolean interlace, VipsForeignKeep keep, double* background, int background_n, int page_height, const char* profile) {
    VipsOperation *operation = vips_operation_new("gifsave_buffer");
    if (!operation) return 1;
    VipsArrayDouble *background_array = NULL;
    if (background != NULL && background_n > 0) { background_array = vips_array_double_new(background, background_n); }
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        set_double_param(operation, "dither", dither) ||
        set_int_param(operation, "effort", effort) ||
        set_int_param(operation, "bitdepth", bitdepth) ||
        set_double_param(operation, "interframe_maxerror", interframe_maxerror) ||
        set_bool_param(operation, "reuse", reuse) ||
        set_double_param(operation, "interpalette_maxerror", interpalette_maxerror) ||
        set_bool_param(operation, "interlace", interlace) ||
        set_int_param(operation, "keep", keep) ||
        set_array_double_param(operation, "background", background_array) ||
        set_int_param(operation, "page_height", page_height) ||
        set_string_param(operation, "profile", profile)
    ) {
        g_object_unref(operation);
        if (background_array != NULL) { vips_area_unref(VIPS_AREA(background_array)); }
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "buffer", buf, "buffer_length", len, NULL);
    if (background_array != NULL) { vips_area_unref(VIPS_AREA(background_array)); }
    return result;
}

int vipsgen_pngsave(VipsImage* in, const char* filename) {
    return vips_pngsave(in, filename, NULL);
}

int vipsgen_pngsave_with_options(VipsImage* in, const char* filename, int compression, gboolean interlace, VipsForeignPngFilter filter, gboolean palette, int Q, double dither, int bitdepth, int effort, VipsForeignKeep keep, double* background, int background_n, int page_height, const char* profile) {
    VipsOperation *operation = vips_operation_new("pngsave");
    if (!operation) return 1;
    VipsArrayDouble *background_array = NULL;
    if (background != NULL && background_n > 0) { background_array = vips_array_double_new(background, background_n); }
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "filename", filename, NULL) ||
        set_int_param(operation, "compression", compression) ||
        set_bool_param(operation, "interlace", interlace) ||
        set_int_param(operation, "filter", filter) ||
        set_bool_param(operation, "palette", palette) ||
        set_int_param(operation, "Q", Q) ||
        set_double_param(operation, "dither", dither) ||
        set_int_param(operation, "bitdepth", bitdepth) ||
        set_int_param(operation, "effort", effort) ||
        set_int_param(operation, "keep", keep) ||
        set_array_double_param(operation, "background", background_array) ||
        set_int_param(operation, "page_height", page_height) ||
        set_string_param(operation, "profile", profile)
    ) {
        g_object_unref(operation);
        if (background_array != NULL) { vips_area_unref(VIPS_AREA(background_array)); }
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, NULL);
    if (background_array != NULL) { vips_area_unref(VIPS_AREA(background_array)); }
    return result;
}

int vipsgen_pngsave_buffer(VipsImage* in, void** buf, size_t* len) {
    return vips_pngsave_buffer(in, buf, len, NULL);
}

int vipsgen_pngsave_buffer_with_options(VipsImage* in, void** buf, size_t* len, int compression, gboolean interlace, VipsForeignPngFilter filter, gboolean palette, int Q, double dither, int bitdepth, int effort, VipsForeignKeep keep, double* background, int background_n, int page_height, const char* profile) {
    VipsOperation *operation = vips_operation_new("pngsave_buffer");
    if (!operation) return 1;
    VipsArrayDouble *background_array = NULL;
    if (background != NULL && background_n > 0) { background_array = vips_array_double_new(background, background_n); }
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        set_int_param(operation, "compression", compression) ||
        set_bool_param(operation, "interlace", interlace) ||
        set_int_param(operation, "filter", filter) ||
        set_bool_param(operation, "palette", palette) ||
        set_int_param(operation, "Q", Q) ||
        set_double_param(operation, "dither", dither) ||
        set_int_param(operation, "bitdepth", bitdepth) ||
        set_int_param(operation, "effort", effort) ||
        set_int_param(operation, "keep", keep) ||
        set_array_double_param(operation, "background", background_array) ||
        set_int_param(operation, "page_height", page_height) ||
        set_string_param(operation, "profile", profile)
    ) {
        g_object_unref(operation);
        if (background_array != NULL) { vips_area_unref(VIPS_AREA(background_array)); }
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "buffer", buf, "buffer_length", len, NULL);
    if (background_array != NULL) { vips_area_unref(VIPS_AREA(background_array)); }
    return result;
}

int vipsgen_jpegsave(VipsImage* in, const char* filename) {
    return vips_jpegsave(in, filename, NULL);
}

int vipsgen_jpegsave_with_options(VipsImage* in, const char* filename, int Q, gboolean optimize_coding, gboolean interlace, gboolean trellis_quant, gboolean overshoot_deringing, gboolean optimize_scans, int quant_table, VipsForeignSubsample subsample_mode, int restart_interval, VipsForeignKeep keep, double* background, int background_n, int page_height, const char* profile) {
    VipsOperation *operation = vips_operation_new("jpegsave");
    if (!operation) return 1;
    VipsArrayDouble *background_array = NULL;
    if (background != NULL && background_n > 0) { background_array = vips_array_double_new(background, background_n); }
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "filename", filename, NULL) ||
        set_int_param(operation, "Q", Q) ||
        set_bool_param(operation, "optimize_coding", optimize_coding) ||
        set_bool_param(operation, "interlace", interlace) ||
        set_bool_param(operation, "trellis_quant", trellis_quant) ||
        set_bool_param(operation, "overshoot_deringing", overshoot_deringing) ||
        set_bool_param(operation, "optimize_scans", optimize_scans) ||
        set_int_param(operation, "quant_table", quant_table) ||
        set_int_param(operation, "subsample_mode", subsample_mode) ||
        set_int_param(operation, "restart_interval", restart_interval) ||
        set_int_param(operation, "keep", keep) ||
        set_array_double_param(operation, "background", background_array) ||
        set_int_param(operation, "page_height", page_height) ||
        set_string_param(operation, "profile", profile)
    ) {
        g_object_unref(operation);
        if (background_array != NULL) { vips_area_unref(VIPS_AREA(background_array)); }
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, NULL);
    if (background_array != NULL) { vips_area_unref(VIPS_AREA(background_array)); }
    return result;
}

int vipsgen_jpegsave_buffer(VipsImage* in, void** buf, size_t* len) {
    return vips_jpegsave_buffer(in, buf, len, NULL);
}

int vipsgen_jpegsave_buffer_with_options(VipsImage* in, void** buf, size_t* len, int Q, gboolean optimize_coding, gboolean interlace, gboolean trellis_quant, gboolean overshoot_deringing, gboolean optimize_scans, int quant_table, VipsForeignSubsample subsample_mode, int restart_interval, VipsForeignKeep keep, double* background, int background_n, int page_height, const char* profile) {
    VipsOperation *operation = vips_operation_new("jpegsave_buffer");
    if (!operation) return 1;
    VipsArrayDouble *background_array = NULL;
    if (background != NULL && background_n > 0) { background_array = vips_array_double_new(background, background_n); }
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        set_int_param(operation, "Q", Q) ||
        set_bool_param(operation, "optimize_coding", optimize_coding) ||
        set_bool_param(operation, "interlace", interlace) ||
        set_bool_param(operation, "trellis_quant", trellis_quant) ||
        set_bool_param(operation, "overshoot_deringing", overshoot_deringing) ||
        set_bool_param(operation, "optimize_scans", optimize_scans) ||
        set_int_param(operation, "quant_table", quant_table) ||
        set_int_param(operation, "subsample_mode", subsample_mode) ||
        set_int_param(operation, "restart_interval", restart_interval) ||
        set_int_param(operation, "keep", keep) ||
        set_array_double_param(operation, "background", background_array) ||
        set_int_param(operation, "page_height", page_height) ||
        set_string_param(operation, "profile", profile)
    ) {
        g_object_unref(operation);
        if (background_array != NULL) { vips_area_unref(VIPS_AREA(background_array)); }
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "buffer", buf, "buffer_length", len, NULL);
    if (background_array != NULL) { vips_area_unref(VIPS_AREA(background_array)); }
    return result;
}

int vipsgen_webpsave(VipsImage* in, const char* filename) {
    return vips_webpsave(in, filename, NULL);
}

int vipsgen_webpsave_with_options(VipsImage* in, const char* filename, int Q, gboolean lossless, VipsForeignWebpPreset preset, gboolean smart_subsample, gboolean near_lossless, int alpha_q, gboolean min_size, int kmin, int kmax, int effort, int target_size, gboolean mixed, gboolean smart_deblock, int passes, VipsForeignKeep keep, double* background, int background_n, int page_height, const char* profile) {
    VipsOperation *operation = vips_operation_new("webpsave");
    if (!operation) return 1;
    VipsArrayDouble *background_array = NULL;
    if (background != NULL && background_n > 0) { background_array = vips_array_double_new(background, background_n); }
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "filename", filename, NULL) ||
        set_int_param(operation, "Q", Q) ||
        set_bool_param(operation, "lossless", lossless) ||
        set_int_param(operation, "preset", preset) ||
        set_bool_param(operation, "smart_subsample", smart_subsample) ||
        set_bool_param(operation, "near_lossless", near_lossless) ||
        set_int_param(operation, "alpha_q", alpha_q) ||
        set_bool_param(operation, "min_size", min_size) ||
        set_int_param(operation, "kmin", kmin) ||
        set_int_param(operation, "kmax", kmax) ||
        set_int_param(operation, "effort", effort) ||
        set_int_param(operation, "target_size", target_size) ||
        set_bool_param(operation, "mixed", mixed) ||
        set_bool_param(operation, "smart_deblock", smart_deblock) ||
        set_int_param(operation, "passes", passes) ||
        set_int_param(operation, "keep", keep) ||
        set_array_double_param(operation, "background", background_array) ||
        set_int_param(operation, "page_height", page_height) ||
        set_string_param(operation, "profile", profile)
    ) {
        g_object_unref(operation);
        if (background_array != NULL) { vips_area_unref(VIPS_AREA(background_array)); }
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, NULL);
    if (background_array != NULL) { vips_area_unref(VIPS_AREA(background_array)); }
    return result;
}

int vipsgen_webpsave_buffer(VipsImage* in, void** buf, size_t* len) {
    return vips_webpsave_buffer(in, buf, len, NULL);
}

int vipsgen_webpsave_buffer_with_options(VipsImage* in, void** buf, size_t* len, int Q, gboolean lossless, VipsForeignWebpPreset preset, gboolean smart_subsample, gboolean near_lossless, int alpha_q, gboolean min_size, int kmin, int kmax, int effort, int target_size, gboolean mixed, gboolean smart_deblock, int passes, VipsForeignKeep keep, double* background, int background_n, int page_height, const char* profile) {
    VipsOperation *operation = vips_operation_new("webpsave_buffer");
    if (!operation) return 1;
    VipsArrayDouble *background_array = NULL;
    if (background != NULL && background_n > 0) { background_array = vips_array_double_new(background, background_n); }
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        set_int_param(operation, "Q", Q) ||
        set_bool_param(operation, "lossless", lossless) ||
        set_int_param(operation, "preset", preset) ||
        set_bool_param(operation, "smart_subsample", smart_subsample) ||
        set_bool_param(operation, "near_lossless", near_lossless) ||
        set_int_param(operation, "alpha_q", alpha_q) ||
        set_bool_param(operation, "min_size", min_size) ||
        set_int_param(operation, "kmin", kmin) ||
        set_int_param(operation, "kmax", kmax) ||
        set_int_param(operation, "effort", effort) ||
        set_int_param(operation, "target_size", target_size) ||
        set_bool_param(operation, "mixed", mixed) ||
        set_bool_param(operation, "smart_deblock", smart_deblock) ||
        set_int_param(operation, "passes", passes) ||
        set_int_param(operation, "keep", keep) ||
        set_array_double_param(operation, "background", background_array) ||
        set_int_param(operation, "page_height", page_height) ||
        set_string_param(operation, "profile", profile)
    ) {
        g_object_unref(operation);
        if (background_array != NULL) { vips_area_unref(VIPS_AREA(background_array)); }
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "buffer", buf, "buffer_length", len, NULL);
    if (background_array != NULL) { vips_area_unref(VIPS_AREA(background_array)); }
    return result;
}

int vipsgen_tiffsave(VipsImage* in, const char* filename) {
    return vips_tiffsave(in, filename, NULL);
}

int vipsgen_tiffsave_with_options(VipsImage* in, const char* filename, VipsForeignTiffCompression compression, int Q, VipsForeignTiffPredictor predictor, gboolean tile, int tile_width, int tile_height, gboolean pyramid, gboolean miniswhite, int bitdepth, VipsForeignTiffResunit resunit, double xres, double yres, gboolean bigtiff, gboolean properties, VipsRegionShrink region_shrink, int level, gboolean lossless, VipsForeignDzDepth depth, gboolean subifd, gboolean premultiply, VipsForeignKeep keep, double* background, int background_n, int page_height, const char* profile) {
    VipsOperation *operation = vips_operation_new("tiffsave");
    if (!operation) return 1;
    VipsArrayDouble *background_array = NULL;
    if (background != NULL && background_n > 0) { background_array = vips_array_double_new(background, background_n); }
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "filename", filename, NULL) ||
        set_int_param(operation, "compression", compression) ||
        set_int_param(operation, "Q", Q) ||
        set_int_param(operation, "predictor", predictor) ||
        set_bool_param(operation, "tile", tile) ||
        set_int_param(operation, "tile_width", tile_width) ||
        set_int_param(operation, "tile_height", tile_height) ||
        set_bool_param(operation, "pyramid", pyramid) ||
        set_bool_param(operation, "miniswhite", miniswhite) ||
        set_int_param(operation, "bitdepth", bitdepth) ||
        set_int_param(operation, "resunit", resunit) ||
        set_double_param(operation, "xres", xres) ||
        set_double_param(operation, "yres", yres) ||
        set_bool_param(operation, "bigtiff", bigtiff) ||
        set_bool_param(operation, "properties", properties) ||
        set_int_param(operation, "region_shrink", region_shrink) ||
        set_int_param(operation, "level", level) ||
        set_bool_param(operation, "lossless", lossless) ||
        set_int_param(operation, "depth", depth) ||
        set_bool_param(operation, "subifd", subifd) ||
        set_bool_param(operation, "premultiply", premultiply) ||
        set_int_param(operation, "keep", keep) ||
        set_array_double_param(operation, "background", background_array) ||
        set_int_param(operation, "page_height", page_height) ||
        set_string_param(operation, "profile", profile)
    ) {
        g_object_unref(operation);
        if (background_array != NULL) { vips_area_unref(VIPS_AREA(background_array)); }
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, NULL);
    if (background_array != NULL) { vips_area_unref(VIPS_AREA(background_array)); }
    return result;
}

int vipsgen_tiffsave_buffer(VipsImage* in, void** buf, size_t* len) {
    return vips_tiffsave_buffer(in, buf, len, NULL);
}

int vipsgen_tiffsave_buffer_with_options(VipsImage* in, void** buf, size_t* len, VipsForeignTiffCompression compression, int Q, VipsForeignTiffPredictor predictor, gboolean tile, int tile_width, int tile_height, gboolean pyramid, gboolean miniswhite, int bitdepth, VipsForeignTiffResunit resunit, double xres, double yres, gboolean bigtiff, gboolean properties, VipsRegionShrink region_shrink, int level, gboolean lossless, VipsForeignDzDepth depth, gboolean subifd, gboolean premultiply, VipsForeignKeep keep, double* background, int background_n, int page_height, const char* profile) {
    VipsOperation *operation = vips_operation_new("tiffsave_buffer");
    if (!operation) return 1;
    VipsArrayDouble *background_array = NULL;
    if (background != NULL && background_n > 0) { background_array = vips_array_double_new(background, background_n); }
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        set_int_param(operation, "compression", compression) ||
        set_int_param(operation, "Q", Q) ||
        set_int_param(operation, "predictor", predictor) ||
        set_bool_param(operation, "tile", tile) ||
        set_int_param(operation, "tile_width", tile_width) ||
        set_int_param(operation, "tile_height", tile_height) ||
        set_bool_param(operation, "pyramid", pyramid) ||
        set_bool_param(operation, "miniswhite", miniswhite) ||
        set_int_param(operation, "bitdepth", bitdepth) ||
        set_int_param(operation, "resunit", resunit) ||
        set_double_param(operation, "xres", xres) ||
        set_double_param(operation, "yres", yres) ||
        set_bool_param(operation, "bigtiff", bigtiff) ||
        set_bool_param(operation, "properties", properties) ||
        set_int_param(operation, "region_shrink", region_shrink) ||
        set_int_param(operation, "level", level) ||
        set_bool_param(operation, "lossless", lossless) ||
        set_int_param(operation, "depth", depth) ||
        set_bool_param(operation, "subifd", subifd) ||
        set_bool_param(operation, "premultiply", premultiply) ||
        set_int_param(operation, "keep", keep) ||
        set_array_double_param(operation, "background", background_array) ||
        set_int_param(operation, "page_height", page_height) ||
        set_string_param(operation, "profile", profile)
    ) {
        g_object_unref(operation);
        if (background_array != NULL) { vips_area_unref(VIPS_AREA(background_array)); }
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "buffer", buf, "buffer_length", len, NULL);
    if (background_array != NULL) { vips_area_unref(VIPS_AREA(background_array)); }
    return result;
}

int vipsgen_fitssave(VipsImage* in, const char* filename) {
    return vips_fitssave(in, filename, NULL);
}

int vipsgen_fitssave_with_options(VipsImage* in, const char* filename, VipsForeignKeep keep, double* background, int background_n, int page_height, const char* profile) {
    VipsOperation *operation = vips_operation_new("fitssave");
    if (!operation) return 1;
    VipsArrayDouble *background_array = NULL;
    if (background != NULL && background_n > 0) { background_array = vips_array_double_new(background, background_n); }
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "filename", filename, NULL) ||
        set_int_param(operation, "keep", keep) ||
        set_array_double_param(operation, "background", background_array) ||
        set_int_param(operation, "page_height", page_height) ||
        set_string_param(operation, "profile", profile)
    ) {
        g_object_unref(operation);
        if (background_array != NULL) { vips_area_unref(VIPS_AREA(background_array)); }
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, NULL);
    if (background_array != NULL) { vips_area_unref(VIPS_AREA(background_array)); }
    return result;
}

int vipsgen_magicksave(VipsImage* in, const char* filename) {
    return vips_magicksave(in, filename, NULL);
}

int vipsgen_magicksave_with_options(VipsImage* in, const char* filename, const char* format, int quality, gboolean optimize_gif_frames, gboolean optimize_gif_transparency, int bitdepth, VipsForeignKeep keep, double* background, int background_n, int page_height, const char* profile) {
    VipsOperation *operation = vips_operation_new("magicksave");
    if (!operation) return 1;
    VipsArrayDouble *background_array = NULL;
    if (background != NULL && background_n > 0) { background_array = vips_array_double_new(background, background_n); }
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "filename", filename, NULL) ||
        set_string_param(operation, "format", format) ||
        set_int_param(operation, "quality", quality) ||
        set_bool_param(operation, "optimize_gif_frames", optimize_gif_frames) ||
        set_bool_param(operation, "optimize_gif_transparency", optimize_gif_transparency) ||
        set_int_param(operation, "bitdepth", bitdepth) ||
        set_int_param(operation, "keep", keep) ||
        set_array_double_param(operation, "background", background_array) ||
        set_int_param(operation, "page_height", page_height) ||
        set_string_param(operation, "profile", profile)
    ) {
        g_object_unref(operation);
        if (background_array != NULL) { vips_area_unref(VIPS_AREA(background_array)); }
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, NULL);
    if (background_array != NULL) { vips_area_unref(VIPS_AREA(background_array)); }
    return result;
}

int vipsgen_magicksave_buffer(VipsImage* in, void** buf, size_t* len) {
    return vips_magicksave_buffer(in, buf, len, NULL);
}

int vipsgen_magicksave_buffer_with_options(VipsImage* in, void** buf, size_t* len, const char* format, int quality, gboolean optimize_gif_frames, gboolean optimize_gif_transparency, int bitdepth, VipsForeignKeep keep, double* background, int background_n, int page_height, const char* profile) {
    VipsOperation *operation = vips_operation_new("magicksave_buffer");
    if (!operation) return 1;
    VipsArrayDouble *background_array = NULL;
    if (background != NULL && background_n > 0) { background_array = vips_array_double_new(background, background_n); }
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        set_string_param(operation, "format", format) ||
        set_int_param(operation, "quality", quality) ||
        set_bool_param(operation, "optimize_gif_frames", optimize_gif_frames) ||
        set_bool_param(operation, "optimize_gif_transparency", optimize_gif_transparency) ||
        set_int_param(operation, "bitdepth", bitdepth) ||
        set_int_param(operation, "keep", keep) ||
        set_array_double_param(operation, "background", background_array) ||
        set_int_param(operation, "page_height", page_height) ||
        set_string_param(operation, "profile", profile)
    ) {
        g_object_unref(operation);
        if (background_array != NULL) { vips_area_unref(VIPS_AREA(background_array)); }
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "buffer", buf, "buffer_length", len, NULL);
    if (background_array != NULL) { vips_area_unref(VIPS_AREA(background_array)); }
    return result;
}

int vipsgen_heifsave(VipsImage* in, const char* filename) {
    return vips_heifsave(in, filename, NULL);
}

int vipsgen_heifsave_with_options(VipsImage* in, const char* filename, int Q, int bitdepth, gboolean lossless, VipsForeignHeifCompression compression, int effort, VipsForeignSubsample subsample_mode, VipsForeignHeifEncoder encoder, VipsForeignKeep keep, double* background, int background_n, int page_height, const char* profile) {
    VipsOperation *operation = vips_operation_new("heifsave");
    if (!operation) return 1;
    VipsArrayDouble *background_array = NULL;
    if (background != NULL && background_n > 0) { background_array = vips_array_double_new(background, background_n); }
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "filename", filename, NULL) ||
        set_int_param(operation, "Q", Q) ||
        set_int_param(operation, "bitdepth", bitdepth) ||
        set_bool_param(operation, "lossless", lossless) ||
        set_int_param(operation, "compression", compression) ||
        set_int_param(operation, "effort", effort) ||
        set_int_param(operation, "subsample_mode", subsample_mode) ||
        set_int_param(operation, "encoder", encoder) ||
        set_int_param(operation, "keep", keep) ||
        set_array_double_param(operation, "background", background_array) ||
        set_int_param(operation, "page_height", page_height) ||
        set_string_param(operation, "profile", profile)
    ) {
        g_object_unref(operation);
        if (background_array != NULL) { vips_area_unref(VIPS_AREA(background_array)); }
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, NULL);
    if (background_array != NULL) { vips_area_unref(VIPS_AREA(background_array)); }
    return result;
}

int vipsgen_heifsave_buffer(VipsImage* in, void** buf, size_t* len) {
    return vips_heifsave_buffer(in, buf, len, NULL);
}

int vipsgen_heifsave_buffer_with_options(VipsImage* in, void** buf, size_t* len, int Q, int bitdepth, gboolean lossless, VipsForeignHeifCompression compression, int effort, VipsForeignSubsample subsample_mode, VipsForeignHeifEncoder encoder, VipsForeignKeep keep, double* background, int background_n, int page_height, const char* profile) {
    VipsOperation *operation = vips_operation_new("heifsave_buffer");
    if (!operation) return 1;
    VipsArrayDouble *background_array = NULL;
    if (background != NULL && background_n > 0) { background_array = vips_array_double_new(background, background_n); }
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        set_int_param(operation, "Q", Q) ||
        set_int_param(operation, "bitdepth", bitdepth) ||
        set_bool_param(operation, "lossless", lossless) ||
        set_int_param(operation, "compression", compression) ||
        set_int_param(operation, "effort", effort) ||
        set_int_param(operation, "subsample_mode", subsample_mode) ||
        set_int_param(operation, "encoder", encoder) ||
        set_int_param(operation, "keep", keep) ||
        set_array_double_param(operation, "background", background_array) ||
        set_int_param(operation, "page_height", page_height) ||
        set_string_param(operation, "profile", profile)
    ) {
        g_object_unref(operation);
        if (background_array != NULL) { vips_area_unref(VIPS_AREA(background_array)); }
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "buffer", buf, "buffer_length", len, NULL);
    if (background_array != NULL) { vips_area_unref(VIPS_AREA(background_array)); }
    return result;
}

int vipsgen_thumbnail(const char* filename, VipsImage** out, int width) {
    return vips_thumbnail(filename, out, width, NULL);
}

int vipsgen_thumbnail_with_options(const char* filename, VipsImage** out, int width, int height, VipsSize size, gboolean no_rotate, VipsInteresting crop, gboolean linear, const char* import_profile, const char* export_profile, VipsIntent intent, VipsFailOn fail_on) {
    VipsOperation *operation = vips_operation_new("thumbnail");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "filename", filename, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "width", width, NULL) ||
        set_int_param(operation, "height", height) ||
        set_int_param(operation, "size", size) ||
        set_bool_param(operation, "no_rotate", no_rotate) ||
        set_int_param(operation, "crop", crop) ||
        set_bool_param(operation, "linear", linear) ||
        set_string_param(operation, "import_profile", import_profile) ||
        set_string_param(operation, "export_profile", export_profile) ||
        set_int_param(operation, "intent", intent) ||
        set_int_param(operation, "fail_on", fail_on)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_thumbnail_buffer(void* buf, size_t len, VipsImage** out, int width) {
    return vips_thumbnail_buffer(buf, len, out, width, NULL);
}

int vipsgen_thumbnail_buffer_with_options(void* buf, size_t len, VipsImage** out, int width, const char* option_string, int height, VipsSize size, gboolean no_rotate, VipsInteresting crop, gboolean linear, const char* import_profile, const char* export_profile, VipsIntent intent, VipsFailOn fail_on) {
    VipsOperation *operation = vips_operation_new("thumbnail_buffer");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "buf", buf, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "len", len, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "width", width, NULL) ||
        set_string_param(operation, "option_string", option_string) ||
        set_int_param(operation, "height", height) ||
        set_int_param(operation, "size", size) ||
        set_bool_param(operation, "no_rotate", no_rotate) ||
        set_int_param(operation, "crop", crop) ||
        set_bool_param(operation, "linear", linear) ||
        set_string_param(operation, "import_profile", import_profile) ||
        set_string_param(operation, "export_profile", export_profile) ||
        set_int_param(operation, "intent", intent) ||
        set_int_param(operation, "fail_on", fail_on)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_thumbnail_image(VipsImage* in, VipsImage** out, int width) {
    return vips_thumbnail_image(in, out, width, NULL);
}

int vipsgen_thumbnail_image_with_options(VipsImage* in, VipsImage** out, int width, int height, VipsSize size, gboolean no_rotate, VipsInteresting crop, gboolean linear, const char* import_profile, const char* export_profile, VipsIntent intent, VipsFailOn fail_on) {
    VipsOperation *operation = vips_operation_new("thumbnail_image");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "width", width, NULL) ||
        set_int_param(operation, "height", height) ||
        set_int_param(operation, "size", size) ||
        set_bool_param(operation, "no_rotate", no_rotate) ||
        set_int_param(operation, "crop", crop) ||
        set_bool_param(operation, "linear", linear) ||
        set_string_param(operation, "import_profile", import_profile) ||
        set_string_param(operation, "export_profile", export_profile) ||
        set_int_param(operation, "intent", intent) ||
        set_int_param(operation, "fail_on", fail_on)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_thumbnail_source(VipsSourceCustom* source, VipsImage** out, int width) {
    return vips_thumbnail_source((VipsSource*) source, out, width, NULL);
}

int vipsgen_thumbnail_source_with_options(VipsSourceCustom* source, VipsImage** out, int width, const char* option_string, int height, VipsSize size, gboolean no_rotate, VipsInteresting crop, gboolean linear, const char* import_profile, const char* export_profile, VipsIntent intent, VipsFailOn fail_on) {
    VipsOperation *operation = vips_operation_new("thumbnail_source");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "source", (VipsSource*)source, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "width", width, NULL) ||
        set_string_param(operation, "option_string", option_string) ||
        set_int_param(operation, "height", height) ||
        set_int_param(operation, "size", size) ||
        set_bool_param(operation, "no_rotate", no_rotate) ||
        set_int_param(operation, "crop", crop) ||
        set_bool_param(operation, "linear", linear) ||
        set_string_param(operation, "import_profile", import_profile) ||
        set_string_param(operation, "export_profile", export_profile) ||
        set_int_param(operation, "intent", intent) ||
        set_int_param(operation, "fail_on", fail_on)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_mapim(VipsImage* in, VipsImage** out, VipsImage* index) {
    return vips_mapim(in, out, index, NULL);
}

int vipsgen_mapim_with_options(VipsImage* in, VipsImage** out, VipsImage* index, VipsInterpolate* interpolate, double* background, int background_n, gboolean premultiplied, VipsExtend extend) {
    VipsOperation *operation = vips_operation_new("mapim");
    if (!operation) return 1;
    VipsArrayDouble *background_array = NULL;
    if (background != NULL && background_n > 0) { background_array = vips_array_double_new(background, background_n); }
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "index", index, NULL) ||
        set_interpolate_param(operation, "interpolate", interpolate) ||
        set_array_double_param(operation, "background", background_array) ||
        set_bool_param(operation, "premultiplied", premultiplied) ||
        set_int_param(operation, "extend", extend)
    ) {
        g_object_unref(operation);
        if (background_array != NULL) { vips_area_unref(VIPS_AREA(background_array)); }
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    if (background_array != NULL) { vips_area_unref(VIPS_AREA(background_array)); }
    return result;
}

int vipsgen_shrink(VipsImage* in, VipsImage** out, double hshrink, double vshrink) {
    return vips_shrink(in, out, hshrink, vshrink, NULL);
}

int vipsgen_shrink_with_options(VipsImage* in, VipsImage** out, double hshrink, double vshrink, gboolean ceil) {
    VipsOperation *operation = vips_operation_new("shrink");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "hshrink", hshrink, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "vshrink", vshrink, NULL) ||
        set_bool_param(operation, "ceil", ceil)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_shrinkh(VipsImage* in, VipsImage** out, int hshrink) {
    return vips_shrinkh(in, out, hshrink, NULL);
}

int vipsgen_shrinkh_with_options(VipsImage* in, VipsImage** out, int hshrink, gboolean ceil) {
    VipsOperation *operation = vips_operation_new("shrinkh");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "hshrink", hshrink, NULL) ||
        set_bool_param(operation, "ceil", ceil)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_shrinkv(VipsImage* in, VipsImage** out, int vshrink) {
    return vips_shrinkv(in, out, vshrink, NULL);
}

int vipsgen_shrinkv_with_options(VipsImage* in, VipsImage** out, int vshrink, gboolean ceil) {
    VipsOperation *operation = vips_operation_new("shrinkv");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "vshrink", vshrink, NULL) ||
        set_bool_param(operation, "ceil", ceil)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_reduceh(VipsImage* in, VipsImage** out, double hshrink) {
    return vips_reduceh(in, out, hshrink, NULL);
}

int vipsgen_reduceh_with_options(VipsImage* in, VipsImage** out, double hshrink, VipsKernel kernel, double gap) {
    VipsOperation *operation = vips_operation_new("reduceh");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "hshrink", hshrink, NULL) ||
        set_int_param(operation, "kernel", kernel) ||
        set_double_param(operation, "gap", gap)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_reducev(VipsImage* in, VipsImage** out, double vshrink) {
    return vips_reducev(in, out, vshrink, NULL);
}

int vipsgen_reducev_with_options(VipsImage* in, VipsImage** out, double vshrink, VipsKernel kernel, double gap) {
    VipsOperation *operation = vips_operation_new("reducev");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "vshrink", vshrink, NULL) ||
        set_int_param(operation, "kernel", kernel) ||
        set_double_param(operation, "gap", gap)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_reduce(VipsImage* in, VipsImage** out, double hshrink, double vshrink) {
    return vips_reduce(in, out, hshrink, vshrink, NULL);
}

int vipsgen_reduce_with_options(VipsImage* in, VipsImage** out, double hshrink, double vshrink, VipsKernel kernel, double gap) {
    VipsOperation *operation = vips_operation_new("reduce");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "hshrink", hshrink, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "vshrink", vshrink, NULL) ||
        set_int_param(operation, "kernel", kernel) ||
        set_double_param(operation, "gap", gap)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_quadratic(VipsImage* in, VipsImage** out, VipsImage* coeff) {
    return vips_quadratic(in, out, coeff, NULL);
}

int vipsgen_quadratic_with_options(VipsImage* in, VipsImage** out, VipsImage* coeff, VipsInterpolate* interpolate) {
    VipsOperation *operation = vips_operation_new("quadratic");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "coeff", coeff, NULL) ||
        set_interpolate_param(operation, "interpolate", interpolate)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_affine(VipsImage* in, VipsImage** out, double a, double b, double c, double d) {
    return vips_affine(in, out, a, b, c, d, NULL);
}

int vipsgen_affine_with_options(VipsImage* in, VipsImage** out, double a, double b, double c, double d, VipsInterpolate* interpolate, int* oarea, int oarea_n, double odx, double ody, double idx, double idy, double* background, int background_n, gboolean premultiplied, VipsExtend extend) {
    VipsOperation *operation = vips_operation_new("affine");
    if (!operation) return 1;
    VipsArrayInt *oarea_array = NULL;
    if (oarea != NULL && oarea_n > 0) { oarea_array = vips_array_int_new(oarea, oarea_n); }
    VipsArrayDouble *background_array = NULL;
    if (background != NULL && background_n > 0) { background_array = vips_array_double_new(background, background_n); }
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "a", a, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "b", b, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "c", c, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "d", d, NULL) ||
        set_interpolate_param(operation, "interpolate", interpolate) ||
        set_array_int_param(operation, "oarea", oarea_array) ||
        set_double_param(operation, "odx", odx) ||
        set_double_param(operation, "ody", ody) ||
        set_double_param(operation, "idx", idx) ||
        set_double_param(operation, "idy", idy) ||
        set_array_double_param(operation, "background", background_array) ||
        set_bool_param(operation, "premultiplied", premultiplied) ||
        set_int_param(operation, "extend", extend)
    ) {
        g_object_unref(operation);
        if (oarea_array != NULL) { vips_area_unref(VIPS_AREA(oarea_array)); }
        if (background_array != NULL) { vips_area_unref(VIPS_AREA(background_array)); }
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    if (oarea_array != NULL) { vips_area_unref(VIPS_AREA(oarea_array)); }
    if (background_array != NULL) { vips_area_unref(VIPS_AREA(background_array)); }
    return result;
}

int vipsgen_similarity(VipsImage* in, VipsImage** out) {
    return vips_similarity(in, out, NULL);
}

int vipsgen_similarity_with_options(VipsImage* in, VipsImage** out, double scale, double angle, VipsInterpolate* interpolate, double* background, int background_n, double odx, double ody, double idx, double idy) {
    VipsOperation *operation = vips_operation_new("similarity");
    if (!operation) return 1;
    VipsArrayDouble *background_array = NULL;
    if (background != NULL && background_n > 0) { background_array = vips_array_double_new(background, background_n); }
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        set_double_param(operation, "scale", scale) ||
        set_double_param(operation, "angle", angle) ||
        set_interpolate_param(operation, "interpolate", interpolate) ||
        set_array_double_param(operation, "background", background_array) ||
        set_double_param(operation, "odx", odx) ||
        set_double_param(operation, "ody", ody) ||
        set_double_param(operation, "idx", idx) ||
        set_double_param(operation, "idy", idy)
    ) {
        g_object_unref(operation);
        if (background_array != NULL) { vips_area_unref(VIPS_AREA(background_array)); }
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    if (background_array != NULL) { vips_area_unref(VIPS_AREA(background_array)); }
    return result;
}

int vipsgen_rotate(VipsImage* in, VipsImage** out, double angle) {
    return vips_rotate(in, out, angle, NULL);
}

int vipsgen_rotate_with_options(VipsImage* in, VipsImage** out, double angle, VipsInterpolate* interpolate, double* background, int background_n, double odx, double ody, double idx, double idy) {
    VipsOperation *operation = vips_operation_new("rotate");
    if (!operation) return 1;
    VipsArrayDouble *background_array = NULL;
    if (background != NULL && background_n > 0) { background_array = vips_array_double_new(background, background_n); }
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "angle", angle, NULL) ||
        set_interpolate_param(operation, "interpolate", interpolate) ||
        set_array_double_param(operation, "background", background_array) ||
        set_double_param(operation, "odx", odx) ||
        set_double_param(operation, "ody", ody) ||
        set_double_param(operation, "idx", idx) ||
        set_double_param(operation, "idy", idy)
    ) {
        g_object_unref(operation);
        if (background_array != NULL) { vips_area_unref(VIPS_AREA(background_array)); }
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    if (background_array != NULL) { vips_area_unref(VIPS_AREA(background_array)); }
    return result;
}

int vipsgen_resize(VipsImage* in, VipsImage** out, double scale) {
    return vips_resize(in, out, scale, NULL);
}

int vipsgen_resize_with_options(VipsImage* in, VipsImage** out, double scale, VipsKernel kernel, double gap, double vscale) {
    VipsOperation *operation = vips_operation_new("resize");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "scale", scale, NULL) ||
        set_int_param(operation, "kernel", kernel) ||
        set_double_param(operation, "gap", gap) ||
        set_double_param(operation, "vscale", vscale)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_colourspace(VipsImage* in, VipsImage** out, VipsInterpretation space) {
    return vips_colourspace(in, out, space, NULL);
}

int vipsgen_colourspace_with_options(VipsImage* in, VipsImage** out, VipsInterpretation space, VipsInterpretation source_space) {
    VipsOperation *operation = vips_operation_new("colourspace");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "space", space, NULL) ||
        set_int_param(operation, "source_space", source_space)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_Lab2XYZ(VipsImage* in, VipsImage** out) {
    return vips_Lab2XYZ(in, out, NULL);
}

int vipsgen_Lab2XYZ_with_options(VipsImage* in, VipsImage** out, double* temp, int temp_n) {
    VipsOperation *operation = vips_operation_new("Lab2XYZ");
    if (!operation) return 1;
    VipsArrayDouble *temp_array = NULL;
    if (temp != NULL && temp_n > 0) { temp_array = vips_array_double_new(temp, temp_n); }
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        set_array_double_param(operation, "temp", temp_array)
    ) {
        g_object_unref(operation);
        if (temp_array != NULL) { vips_area_unref(VIPS_AREA(temp_array)); }
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    if (temp_array != NULL) { vips_area_unref(VIPS_AREA(temp_array)); }
    return result;
}

int vipsgen_XYZ2Lab(VipsImage* in, VipsImage** out) {
    return vips_XYZ2Lab(in, out, NULL);
}

int vipsgen_XYZ2Lab_with_options(VipsImage* in, VipsImage** out, double* temp, int temp_n) {
    VipsOperation *operation = vips_operation_new("XYZ2Lab");
    if (!operation) return 1;
    VipsArrayDouble *temp_array = NULL;
    if (temp != NULL && temp_n > 0) { temp_array = vips_array_double_new(temp, temp_n); }
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        set_array_double_param(operation, "temp", temp_array)
    ) {
        g_object_unref(operation);
        if (temp_array != NULL) { vips_area_unref(VIPS_AREA(temp_array)); }
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    if (temp_array != NULL) { vips_area_unref(VIPS_AREA(temp_array)); }
    return result;
}

int vipsgen_Lab2LCh(VipsImage* in, VipsImage** out) {
    return vips_Lab2LCh(in, out, NULL);
}

int vipsgen_LCh2Lab(VipsImage* in, VipsImage** out) {
    return vips_LCh2Lab(in, out, NULL);
}

int vipsgen_LCh2CMC(VipsImage* in, VipsImage** out) {
    return vips_LCh2CMC(in, out, NULL);
}

int vipsgen_CMC2LCh(VipsImage* in, VipsImage** out) {
    return vips_CMC2LCh(in, out, NULL);
}

int vipsgen_XYZ2Yxy(VipsImage* in, VipsImage** out) {
    return vips_XYZ2Yxy(in, out, NULL);
}

int vipsgen_Yxy2XYZ(VipsImage* in, VipsImage** out) {
    return vips_Yxy2XYZ(in, out, NULL);
}

int vipsgen_LabQ2Lab(VipsImage* in, VipsImage** out) {
    return vips_LabQ2Lab(in, out, NULL);
}

int vipsgen_Lab2LabQ(VipsImage* in, VipsImage** out) {
    return vips_Lab2LabQ(in, out, NULL);
}

int vipsgen_LabQ2LabS(VipsImage* in, VipsImage** out) {
    return vips_LabQ2LabS(in, out, NULL);
}

int vipsgen_LabS2LabQ(VipsImage* in, VipsImage** out) {
    return vips_LabS2LabQ(in, out, NULL);
}

int vipsgen_LabS2Lab(VipsImage* in, VipsImage** out) {
    return vips_LabS2Lab(in, out, NULL);
}

int vipsgen_Lab2LabS(VipsImage* in, VipsImage** out) {
    return vips_Lab2LabS(in, out, NULL);
}

int vipsgen_rad2float(VipsImage* in, VipsImage** out) {
    return vips_rad2float(in, out, NULL);
}

int vipsgen_float2rad(VipsImage* in, VipsImage** out) {
    return vips_float2rad(in, out, NULL);
}

int vipsgen_LabQ2sRGB(VipsImage* in, VipsImage** out) {
    return vips_LabQ2sRGB(in, out, NULL);
}

int vipsgen_sRGB2HSV(VipsImage* in, VipsImage** out) {
    return vips_sRGB2HSV(in, out, NULL);
}

int vipsgen_HSV2sRGB(VipsImage* in, VipsImage** out) {
    return vips_HSV2sRGB(in, out, NULL);
}

int vipsgen_icc_import(VipsImage* in, VipsImage** out) {
    return vips_icc_import(in, out, NULL);
}

int vipsgen_icc_import_with_options(VipsImage* in, VipsImage** out, VipsPCS pcs, VipsIntent intent, gboolean black_point_compensation, gboolean embedded, const char* input_profile) {
    VipsOperation *operation = vips_operation_new("icc_import");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        set_int_param(operation, "pcs", pcs) ||
        set_int_param(operation, "intent", intent) ||
        set_bool_param(operation, "black_point_compensation", black_point_compensation) ||
        set_bool_param(operation, "embedded", embedded) ||
        set_string_param(operation, "input_profile", input_profile)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_icc_export(VipsImage* in, VipsImage** out) {
    return vips_icc_export(in, out, NULL);
}

int vipsgen_icc_export_with_options(VipsImage* in, VipsImage** out, VipsPCS pcs, VipsIntent intent, gboolean black_point_compensation, const char* output_profile, int depth) {
    VipsOperation *operation = vips_operation_new("icc_export");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        set_int_param(operation, "pcs", pcs) ||
        set_int_param(operation, "intent", intent) ||
        set_bool_param(operation, "black_point_compensation", black_point_compensation) ||
        set_string_param(operation, "output_profile", output_profile) ||
        set_int_param(operation, "depth", depth)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_icc_transform(VipsImage* in, VipsImage** out, const char* output_profile) {
    return vips_icc_transform(in, out, output_profile, NULL);
}

int vipsgen_icc_transform_with_options(VipsImage* in, VipsImage** out, const char* output_profile, VipsPCS pcs, VipsIntent intent, gboolean black_point_compensation, gboolean embedded, const char* input_profile, int depth) {
    VipsOperation *operation = vips_operation_new("icc_transform");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "output_profile", output_profile, NULL) ||
        set_int_param(operation, "pcs", pcs) ||
        set_int_param(operation, "intent", intent) ||
        set_bool_param(operation, "black_point_compensation", black_point_compensation) ||
        set_bool_param(operation, "embedded", embedded) ||
        set_string_param(operation, "input_profile", input_profile) ||
        set_int_param(operation, "depth", depth)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_dE76(VipsImage* left, VipsImage* right, VipsImage** out) {
    return vips_dE76(left, right, out, NULL);
}

int vipsgen_dE00(VipsImage* left, VipsImage* right, VipsImage** out) {
    return vips_dE00(left, right, out, NULL);
}

int vipsgen_dECMC(VipsImage* left, VipsImage* right, VipsImage** out) {
    return vips_dECMC(left, right, out, NULL);
}

int vipsgen_sRGB2scRGB(VipsImage* in, VipsImage** out) {
    return vips_sRGB2scRGB(in, out, NULL);
}

int vipsgen_scRGB2XYZ(VipsImage* in, VipsImage** out) {
    return vips_scRGB2XYZ(in, out, NULL);
}

int vipsgen_scRGB2BW(VipsImage* in, VipsImage** out) {
    return vips_scRGB2BW(in, out, NULL);
}

int vipsgen_scRGB2BW_with_options(VipsImage* in, VipsImage** out, int depth) {
    VipsOperation *operation = vips_operation_new("scRGB2BW");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        set_int_param(operation, "depth", depth)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_XYZ2scRGB(VipsImage* in, VipsImage** out) {
    return vips_XYZ2scRGB(in, out, NULL);
}

int vipsgen_scRGB2sRGB(VipsImage* in, VipsImage** out) {
    return vips_scRGB2sRGB(in, out, NULL);
}

int vipsgen_scRGB2sRGB_with_options(VipsImage* in, VipsImage** out, int depth) {
    VipsOperation *operation = vips_operation_new("scRGB2sRGB");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        set_int_param(operation, "depth", depth)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_CMYK2XYZ(VipsImage* in, VipsImage** out) {
    return vips_CMYK2XYZ(in, out, NULL);
}

int vipsgen_XYZ2CMYK(VipsImage* in, VipsImage** out) {
    return vips_XYZ2CMYK(in, out, NULL);
}

int vipsgen_profile_load(const char* name, VipsBlob** profile) {
    return vips_profile_load(name, profile, NULL);
}

int vipsgen_maplut(VipsImage* in, VipsImage** out, VipsImage* lut) {
    return vips_maplut(in, out, lut, NULL);
}

int vipsgen_maplut_with_options(VipsImage* in, VipsImage** out, VipsImage* lut, int band) {
    VipsOperation *operation = vips_operation_new("maplut");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "lut", lut, NULL) ||
        set_int_param(operation, "band", band)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_case(VipsImage* index, VipsImage** cases, VipsImage** out, int n) {
    return vips_case(index, cases, out, n, NULL);
}

int vipsgen_percent(VipsImage* in, double percent, int* threshold) {
    return vips_percent(in, percent, threshold, NULL);
}

int vipsgen_stdif(VipsImage* in, VipsImage** out, int width, int height) {
    return vips_stdif(in, out, width, height, NULL);
}

int vipsgen_stdif_with_options(VipsImage* in, VipsImage** out, int width, int height, double s0, double b, double m0, double a) {
    VipsOperation *operation = vips_operation_new("stdif");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "width", width, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "height", height, NULL) ||
        set_double_param(operation, "s0", s0) ||
        set_double_param(operation, "b", b) ||
        set_double_param(operation, "m0", m0) ||
        set_double_param(operation, "a", a)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_hist_cum(VipsImage* in, VipsImage** out) {
    return vips_hist_cum(in, out, NULL);
}

int vipsgen_hist_match(VipsImage* in, VipsImage* ref, VipsImage** out) {
    return vips_hist_match(in, ref, out, NULL);
}

int vipsgen_hist_norm(VipsImage* in, VipsImage** out) {
    return vips_hist_norm(in, out, NULL);
}

int vipsgen_hist_equal(VipsImage* in, VipsImage** out) {
    return vips_hist_equal(in, out, NULL);
}

int vipsgen_hist_equal_with_options(VipsImage* in, VipsImage** out, int band) {
    VipsOperation *operation = vips_operation_new("hist_equal");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        set_int_param(operation, "band", band)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_hist_plot(VipsImage* in, VipsImage** out) {
    return vips_hist_plot(in, out, NULL);
}

int vipsgen_hist_local(VipsImage* in, VipsImage** out, int width, int height) {
    return vips_hist_local(in, out, width, height, NULL);
}

int vipsgen_hist_local_with_options(VipsImage* in, VipsImage** out, int width, int height, int max_slope) {
    VipsOperation *operation = vips_operation_new("hist_local");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "width", width, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "height", height, NULL) ||
        set_int_param(operation, "max_slope", max_slope)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_hist_ismonotonic(VipsImage* in, gboolean* monotonic) {
    return vips_hist_ismonotonic(in, monotonic, NULL);
}

int vipsgen_hist_entropy(VipsImage* in, double* out) {
    return vips_hist_entropy(in, out, NULL);
}

int vipsgen_conv(VipsImage* in, VipsImage** out, VipsImage* mask) {
    return vips_conv(in, out, mask, NULL);
}

int vipsgen_conv_with_options(VipsImage* in, VipsImage** out, VipsImage* mask, VipsPrecision precision, int layers, int cluster) {
    VipsOperation *operation = vips_operation_new("conv");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "mask", mask, NULL) ||
        set_int_param(operation, "precision", precision) ||
        set_int_param(operation, "layers", layers) ||
        set_int_param(operation, "cluster", cluster)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_conva(VipsImage* in, VipsImage** out, VipsImage* mask) {
    return vips_conva(in, out, mask, NULL);
}

int vipsgen_conva_with_options(VipsImage* in, VipsImage** out, VipsImage* mask, int layers, int cluster) {
    VipsOperation *operation = vips_operation_new("conva");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "mask", mask, NULL) ||
        set_int_param(operation, "layers", layers) ||
        set_int_param(operation, "cluster", cluster)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_convf(VipsImage* in, VipsImage** out, VipsImage* mask) {
    return vips_convf(in, out, mask, NULL);
}

int vipsgen_convi(VipsImage* in, VipsImage** out, VipsImage* mask) {
    return vips_convi(in, out, mask, NULL);
}

int vipsgen_compass(VipsImage* in, VipsImage** out, VipsImage* mask) {
    return vips_compass(in, out, mask, NULL);
}

int vipsgen_compass_with_options(VipsImage* in, VipsImage** out, VipsImage* mask, int times, VipsAngle45 angle, VipsCombine combine, VipsPrecision precision, int layers, int cluster) {
    VipsOperation *operation = vips_operation_new("compass");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "mask", mask, NULL) ||
        set_int_param(operation, "times", times) ||
        set_int_param(operation, "angle", angle) ||
        set_int_param(operation, "combine", combine) ||
        set_int_param(operation, "precision", precision) ||
        set_int_param(operation, "layers", layers) ||
        set_int_param(operation, "cluster", cluster)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_convsep(VipsImage* in, VipsImage** out, VipsImage* mask) {
    return vips_convsep(in, out, mask, NULL);
}

int vipsgen_convsep_with_options(VipsImage* in, VipsImage** out, VipsImage* mask, VipsPrecision precision, int layers, int cluster) {
    VipsOperation *operation = vips_operation_new("convsep");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "mask", mask, NULL) ||
        set_int_param(operation, "precision", precision) ||
        set_int_param(operation, "layers", layers) ||
        set_int_param(operation, "cluster", cluster)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_convasep(VipsImage* in, VipsImage** out, VipsImage* mask) {
    return vips_convasep(in, out, mask, NULL);
}

int vipsgen_convasep_with_options(VipsImage* in, VipsImage** out, VipsImage* mask, int layers) {
    VipsOperation *operation = vips_operation_new("convasep");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "mask", mask, NULL) ||
        set_int_param(operation, "layers", layers)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_fastcor(VipsImage* in, VipsImage* ref, VipsImage** out) {
    return vips_fastcor(in, ref, out, NULL);
}

int vipsgen_spcor(VipsImage* in, VipsImage* ref, VipsImage** out) {
    return vips_spcor(in, ref, out, NULL);
}

int vipsgen_sharpen(VipsImage* in, VipsImage** out) {
    return vips_sharpen(in, out, NULL);
}

int vipsgen_sharpen_with_options(VipsImage* in, VipsImage** out, double sigma, double x1, double y2, double y3, double m1, double m2) {
    VipsOperation *operation = vips_operation_new("sharpen");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        set_double_param(operation, "sigma", sigma) ||
        set_double_param(operation, "x1", x1) ||
        set_double_param(operation, "y2", y2) ||
        set_double_param(operation, "y3", y3) ||
        set_double_param(operation, "m1", m1) ||
        set_double_param(operation, "m2", m2)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_gaussblur(VipsImage* in, VipsImage** out, double sigma) {
    return vips_gaussblur(in, out, sigma, NULL);
}

int vipsgen_gaussblur_with_options(VipsImage* in, VipsImage** out, double sigma, double min_ampl, VipsPrecision precision) {
    VipsOperation *operation = vips_operation_new("gaussblur");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "sigma", sigma, NULL) ||
        set_double_param(operation, "min_ampl", min_ampl) ||
        set_int_param(operation, "precision", precision)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_sobel(VipsImage* in, VipsImage** out) {
    return vips_sobel(in, out, NULL);
}

int vipsgen_scharr(VipsImage* in, VipsImage** out) {
    return vips_scharr(in, out, NULL);
}

int vipsgen_prewitt(VipsImage* in, VipsImage** out) {
    return vips_prewitt(in, out, NULL);
}

int vipsgen_canny(VipsImage* in, VipsImage** out) {
    return vips_canny(in, out, NULL);
}

int vipsgen_canny_with_options(VipsImage* in, VipsImage** out, double sigma, VipsPrecision precision) {
    VipsOperation *operation = vips_operation_new("canny");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        set_double_param(operation, "sigma", sigma) ||
        set_int_param(operation, "precision", precision)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_fwfft(VipsImage* in, VipsImage** out) {
    return vips_fwfft(in, out, NULL);
}

int vipsgen_invfft(VipsImage* in, VipsImage** out) {
    return vips_invfft(in, out, NULL);
}

int vipsgen_invfft_with_options(VipsImage* in, VipsImage** out, gboolean real) {
    VipsOperation *operation = vips_operation_new("invfft");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        set_bool_param(operation, "real", real)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_freqmult(VipsImage* in, VipsImage* mask, VipsImage** out) {
    return vips_freqmult(in, mask, out, NULL);
}

int vipsgen_spectrum(VipsImage* in, VipsImage** out) {
    return vips_spectrum(in, out, NULL);
}

int vipsgen_phasecor(VipsImage* in, VipsImage* in2, VipsImage** out) {
    return vips_phasecor(in, in2, out, NULL);
}

int vipsgen_morph(VipsImage* in, VipsImage** out, VipsImage* mask, VipsOperationMorphology morph) {
    return vips_morph(in, out, mask, morph, NULL);
}

int vipsgen_rank(VipsImage* in, VipsImage** out, int width, int height, int index) {
    return vips_rank(in, out, width, height, index, NULL);
}

int vipsgen_countlines(VipsImage* in, double* nolines, VipsDirection direction) {
    return vips_countlines(in, nolines, direction, NULL);
}

int vipsgen_labelregions(VipsImage* in, VipsImage** mask) {
    return vips_labelregions(in, mask, NULL);
}

int vipsgen_fill_nearest(VipsImage* in, VipsImage** out) {
    return vips_fill_nearest(in, out, NULL);
}

int vipsgen_draw_rect(VipsImage* image, double* ink, int n, int left, int top, int width, int height) {
    return vips_draw_rect(image, ink, n, left, top, width, height, NULL);
}

int vipsgen_draw_rect_with_options(VipsImage* image, double* ink, int n, int left, int top, int width, int height, gboolean fill) {
    VipsOperation *operation = vips_operation_new("draw_rect");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "image", image, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "ink", ink, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "n", n, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "left", left, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "top", top, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "width", width, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "height", height, NULL) ||
        set_bool_param(operation, "fill", fill)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, NULL);
    return result;
}

int vipsgen_draw_mask(VipsImage* image, double* ink, int n, VipsImage* mask, int x, int y) {
    return vips_draw_mask(image, ink, n, mask, x, y, NULL);
}

int vipsgen_draw_line(VipsImage* image, double* ink, int n, int x1, int y1, int x2, int y2) {
    return vips_draw_line(image, ink, n, x1, y1, x2, y2, NULL);
}

int vipsgen_draw_circle(VipsImage* image, double* ink, int n, int cx, int cy, int radius) {
    return vips_draw_circle(image, ink, n, cx, cy, radius, NULL);
}

int vipsgen_draw_circle_with_options(VipsImage* image, double* ink, int n, int cx, int cy, int radius, gboolean fill) {
    VipsOperation *operation = vips_operation_new("draw_circle");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "image", image, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "ink", ink, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "n", n, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "cx", cx, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "cy", cy, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "radius", radius, NULL) ||
        set_bool_param(operation, "fill", fill)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, NULL);
    return result;
}

int vipsgen_draw_flood(VipsImage* image, double* ink, int n, int x, int y) {
    return vips_draw_flood(image, ink, n, x, y, NULL);
}

int vipsgen_draw_flood_with_options(VipsImage* image, double* ink, int n, int x, int y, VipsImage* test, gboolean equal) {
    VipsOperation *operation = vips_operation_new("draw_flood");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "image", image, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "ink", ink, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "n", n, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "x", x, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "y", y, NULL) ||
        set_image_param(operation, "test", test) ||
        set_bool_param(operation, "equal", equal)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, NULL);
    return result;
}

int vipsgen_draw_image(VipsImage* image, VipsImage* sub, int x, int y) {
    return vips_draw_image(image, sub, x, y, NULL);
}

int vipsgen_draw_image_with_options(VipsImage* image, VipsImage* sub, int x, int y, VipsCombineMode mode) {
    VipsOperation *operation = vips_operation_new("draw_image");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "image", image, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "sub", sub, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "x", x, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "y", y, NULL) ||
        set_int_param(operation, "mode", mode)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, NULL);
    return result;
}

int vipsgen_draw_smudge(VipsImage* image, int left, int top, int width, int height) {
    return vips_draw_smudge(image, left, top, width, height, NULL);
}

int vipsgen_merge(VipsImage* ref, VipsImage* sec, VipsImage** out, VipsDirection direction, int dx, int dy) {
    return vips_merge(ref, sec, out, direction, dx, dy, NULL);
}

int vipsgen_merge_with_options(VipsImage* ref, VipsImage* sec, VipsImage** out, VipsDirection direction, int dx, int dy, int mblend) {
    VipsOperation *operation = vips_operation_new("merge");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "ref", ref, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "sec", sec, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "direction", direction, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "dx", dx, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "dy", dy, NULL) ||
        set_int_param(operation, "mblend", mblend)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_mosaic(VipsImage* ref, VipsImage* sec, VipsImage** out, VipsDirection direction, int xref, int yref, int xsec, int ysec) {
    return vips_mosaic(ref, sec, out, direction, xref, yref, xsec, ysec, NULL);
}

int vipsgen_mosaic_with_options(VipsImage* ref, VipsImage* sec, VipsImage** out, VipsDirection direction, int xref, int yref, int xsec, int ysec, int hwindow, int harea, int mblend, int bandno) {
    VipsOperation *operation = vips_operation_new("mosaic");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "ref", ref, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "sec", sec, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "direction", direction, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "xref", xref, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "yref", yref, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "xsec", xsec, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "ysec", ysec, NULL) ||
        set_int_param(operation, "hwindow", hwindow) ||
        set_int_param(operation, "harea", harea) ||
        set_int_param(operation, "mblend", mblend) ||
        set_int_param(operation, "bandno", bandno)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_mosaic1(VipsImage* ref, VipsImage* sec, VipsImage** out, VipsDirection direction, int xr1, int yr1, int xs1, int ys1, int xr2, int yr2, int xs2, int ys2) {
    return vips_mosaic1(ref, sec, out, direction, xr1, yr1, xs1, ys1, xr2, yr2, xs2, ys2, NULL);
}

int vipsgen_mosaic1_with_options(VipsImage* ref, VipsImage* sec, VipsImage** out, VipsDirection direction, int xr1, int yr1, int xs1, int ys1, int xr2, int yr2, int xs2, int ys2, int hwindow, int harea, gboolean search, VipsInterpolate* interpolate, int mblend) {
    VipsOperation *operation = vips_operation_new("mosaic1");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "ref", ref, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "sec", sec, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "direction", direction, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "xr1", xr1, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "yr1", yr1, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "xs1", xs1, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "ys1", ys1, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "xr2", xr2, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "yr2", yr2, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "xs2", xs2, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "ys2", ys2, NULL) ||
        set_int_param(operation, "hwindow", hwindow) ||
        set_int_param(operation, "harea", harea) ||
        set_bool_param(operation, "search", search) ||
        set_interpolate_param(operation, "interpolate", interpolate) ||
        set_int_param(operation, "mblend", mblend)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_matrixinvert(VipsImage* in, VipsImage** out) {
    return vips_matrixinvert(in, out, NULL);
}

int vipsgen_match(VipsImage* ref, VipsImage* sec, VipsImage** out, int xr1, int yr1, int xs1, int ys1, int xr2, int yr2, int xs2, int ys2) {
    return vips_match(ref, sec, out, xr1, yr1, xs1, ys1, xr2, yr2, xs2, ys2, NULL);
}

int vipsgen_match_with_options(VipsImage* ref, VipsImage* sec, VipsImage** out, int xr1, int yr1, int xs1, int ys1, int xr2, int yr2, int xs2, int ys2, int hwindow, int harea, gboolean search, VipsInterpolate* interpolate) {
    VipsOperation *operation = vips_operation_new("match");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "ref", ref, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "sec", sec, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "xr1", xr1, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "yr1", yr1, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "xs1", xs1, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "ys1", ys1, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "xr2", xr2, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "yr2", yr2, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "xs2", xs2, NULL) ||
        vips_object_set(VIPS_OBJECT(operation), "ys2", ys2, NULL) ||
        set_int_param(operation, "hwindow", hwindow) ||
        set_int_param(operation, "harea", harea) ||
        set_bool_param(operation, "search", search) ||
        set_interpolate_param(operation, "interpolate", interpolate)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}

int vipsgen_globalbalance(VipsImage* in, VipsImage** out) {
    return vips_globalbalance(in, out, NULL);
}

int vipsgen_globalbalance_with_options(VipsImage* in, VipsImage** out, double gamma, gboolean int_output) {
    VipsOperation *operation = vips_operation_new("globalbalance");
    if (!operation) return 1;
    if (
        vips_object_set(VIPS_OBJECT(operation), "in", in, NULL) ||
        set_double_param(operation, "gamma", gamma) ||
        set_bool_param(operation, "int_output", int_output)
    ) {
        g_object_unref(operation);
        return 1;
    }

    int result = vipsgen_operation_execute(&operation, "out", out, NULL);
    return result;
}


int image_new_from_source(VipsSourceCustom *source, VipsImage **out) {
  *out = vips_image_new_from_source((VipsSource*) source, "", NULL);
  if (!*out) return 1;
  return 0;
}

int image_new_from_source_with_option(VipsSourceCustom *source, VipsImage **out, const char *option_string) {
  *out = vips_image_new_from_source((VipsSource*) source, option_string, NULL);
  if (!*out) return 1;
  return 0;
}

int image_new_from_file(const char *name, VipsImage **out) {
  *out = vips_image_new_from_file(name, NULL);
  if (!*out) return 1;
  return 0;
}

int image_new_from_buffer(const void *buf, size_t len, VipsImage **out) {
  *out = vips_image_new_from_buffer(buf, len, "", NULL);
  if (!*out) return 1;
  return 0;
}

int image_new_from_memory(const void *buf, size_t len, int width, int height, int bands, VipsImage **out) {
  *out = vips_image_new_from_memory(buf, len, width, height, bands, VIPS_FORMAT_UCHAR);
  if (!*out) return 1;
  return 0;
}

int image_new_from_buffer_with_option(const void *buf, size_t len, VipsImage **out, const char *option_string) {
  *out = vips_image_new_from_buffer(buf, len, option_string, NULL);
  if (!*out) return 1;
  return 0;
}

void clear_image(VipsImage **image) {
  // https://developer.gnome.org/gobject/stable/gobject-The-Base-Object-Type.html#g-clear-object
  if (G_IS_OBJECT(*image)) g_clear_object(image);
}

int has_alpha_channel(VipsImage *image) {
  return vips_image_hasalpha(image);
}

int embed_multi_page_image(VipsImage *in, VipsImage **out, int left, int top, int width,
                         int height, int extend) {
  VipsObject *base = VIPS_OBJECT(vips_image_new());
  int page_height = vips_image_get_page_height(in);
  int in_width = in->Xsize;
  int n_pages = in->Ysize / page_height;

  VipsImage **page = (VipsImage **) vips_object_local_array(base, n_pages);
  VipsImage **embedded_page = (VipsImage **) vips_object_local_array(base, n_pages);
  VipsImage **copy = (VipsImage **) vips_object_local_array(base, 1);

  // split image into cropped frames
  for (int i = 0; i < n_pages; i++) {
    if (
      vips_extract_area(in, &page[i], 0, page_height * i, in_width, page_height, NULL) ||
      vips_embed(page[i], &embedded_page[i], left, top, width, height, "extend", extend, NULL)
    ) {
      g_object_unref(base);
      return -1;
    }
  }
  // reassemble frames and set page height
  // copy before modifying metadata
  if(
    vips_arrayjoin(embedded_page, &copy[0], n_pages, "across", 1, NULL) ||
    vips_copy(copy[0], out, NULL)
  ) {
    g_object_unref(base);
    return -1;
  }
  vips_image_set_int(*out, VIPS_META_PAGE_HEIGHT, height);
  g_object_unref(base);
  return 0;
}

int embed_multi_page_image_background(VipsImage *in, VipsImage **out, int left, int top, int width,
                                   int height, double r, double g, double b, double a) {
  double background[3] = {r, g, b};
  double backgroundRGBA[4] = {r, g, b, a};

  VipsArrayDouble *vipsBackground;

  if (in->Bands <= 3) {
    vipsBackground = vips_array_double_new(background, 3);
  } else {
    vipsBackground = vips_array_double_new(backgroundRGBA, 4);
  }
  VipsObject *base = VIPS_OBJECT(vips_image_new());
  int page_height = vips_image_get_page_height(in);
  int in_width = in->Xsize;
  int n_pages = in->Ysize / page_height;

  VipsImage **page = (VipsImage **) vips_object_local_array(base, n_pages);
  VipsImage **embedded_page = (VipsImage **) vips_object_local_array(base, n_pages);
  VipsImage **copy = (VipsImage **) vips_object_local_array(base, 1);

  // split image into cropped frames
  for (int i = 0; i < n_pages; i++) {
    if (
      vips_extract_area(in, &page[i], 0, page_height * i, in_width, page_height, NULL) ||
      vips_embed(page[i], &embedded_page[i], left, top, width, height,
          "extend", VIPS_EXTEND_BACKGROUND, "background", vipsBackground, NULL)
    ) {
      vips_area_unref(VIPS_AREA(vipsBackground));
      g_object_unref(base);
      return -1;
    }
  }
  // reassemble frames and set page height
  // copy before modifying metadata
  if(
    vips_arrayjoin(embedded_page, &copy[0], n_pages, "across", 1, NULL) ||
    vips_copy(copy[0], out, NULL)
  ) {
    vips_area_unref(VIPS_AREA(vipsBackground));
    g_object_unref(base);
    return -1;
  }
  vips_image_set_int(*out, VIPS_META_PAGE_HEIGHT, height);
  vips_area_unref(VIPS_AREA(vipsBackground));
  g_object_unref(base);
  return 0;
}

int extract_area_multi_page(VipsImage *in, VipsImage **out, int left, int top, int width, int height) {
  VipsObject *base = VIPS_OBJECT(vips_image_new());
  int page_height = vips_image_get_page_height(in);
  int n_pages = in->Ysize / page_height;

  VipsImage **page = (VipsImage **) vips_object_local_array(base, n_pages);
  VipsImage **copy = (VipsImage **) vips_object_local_array(base, 1);

  // split image into cropped frames
  for (int i = 0; i < n_pages; i++) {
    if(vips_extract_area(in, &page[i], left, page_height * i + top, width, height, NULL)) {
      g_object_unref(base);
      return -1;
    }
  }
  // reassemble frames and set page height
  // copy before modifying metadata
  if(
    vips_arrayjoin(page, &copy[0], n_pages, "across", 1, NULL) ||
    vips_copy(copy[0], out, NULL)
  ) {
    g_object_unref(base);
    return -1;
  }
  vips_image_set_int(*out, VIPS_META_PAGE_HEIGHT, height);
  g_object_unref(base);
  return 0;
}

int rotate_image_multi_page(VipsImage *in, VipsImage **out, VipsAngle angle) {
  VipsObject *base = VIPS_OBJECT(vips_image_new());
  int page_height = vips_image_get_page_height(in);
  int in_width = in->Xsize;
  int n_pages = in->Ysize / page_height;

  VipsImage **page = (VipsImage **) vips_object_local_array(base, n_pages);
  VipsImage **copy = (VipsImage **) vips_object_local_array(base, 1);

  // split image into cropped frames
  for (int i = 0; i < n_pages; i++) {
    if (
      vips_extract_area(in, &page[i], 0, page_height * i, in_width, page_height, NULL) ||
      vips_rot(page[i], &page[i], angle, NULL)
    ) {
      g_object_unref(base);
      return -1;
    }
  }
  // reassemble frames and set page height if rotate 90 or 270
  // copy before modifying metadata
  if(
    vips_arrayjoin(page, &copy[0], n_pages, "across", 1, NULL) ||
    vips_copy(copy[0], out, NULL)
  ) {
    g_object_unref(base);
    return -1;
  }
  if (angle == VIPS_ANGLE_D90 || angle == VIPS_ANGLE_D270) {
    vips_image_set_int(*out, VIPS_META_PAGE_HEIGHT, in_width);
  }
  g_object_unref(base);
  return 0;
}

int label_image(VipsImage *in, VipsImage **out,
          const char *text, const char *font,
          int x, int y, int size, VipsAlign align,
          double r, double g, double b, float opacity) {
  double ones[3] = {1, 1, 1};
  double color[3] = {r, g, b};
  int page_height = vips_image_get_page_height(in);
  int in_width = in->Xsize;
  int n_pages = in->Ysize / page_height;
  VipsImage *base = vips_image_new();
  VipsImage **t = (VipsImage **)vips_object_local_array(VIPS_OBJECT(base), 12);
  if (vips_text(&t[0], text, "font", font, "width", 9999, "height", size, NULL) ||
      vips_linear1(t[0], &t[1], opacity, 0.0, NULL) ||
      vips_cast(t[1], &t[2], VIPS_FORMAT_UCHAR, NULL)) {
    g_object_unref(base);
    return 1;
  }
  int text_width = t[0]->Xsize;
  if (align == VIPS_ALIGN_CENTRE) {
    x = x-text_width/2;
  } else if (align == VIPS_ALIGN_HIGH) {
    x = x-text_width;
  }
  if (vips_embed(t[2], &t[3], x, y, in_width, page_height, NULL) ||
      vips_replicate(t[3], &t[10], 1, n_pages, NULL)) {
    g_object_unref(base);
    return 1;
  }
  if (vips_black(&t[4], 1, 1, NULL) ||
      vips_linear(t[4], &t[5], ones, color, 3, NULL) ||
      vips_cast(t[5], &t[6], VIPS_FORMAT_UCHAR, NULL) ||
      vips_copy(t[6], &t[7], "interpretation", in->Type, NULL) ||
      vips_embed(t[7], &t[8], 0, 0, in_width, page_height,
                 "extend", VIPS_EXTEND_COPY, NULL) ||
      vips_addalpha(t[8], &t[9], NULL) ||
      vips_replicate(t[9], &t[11], 1, n_pages, NULL)) {
    g_object_unref(base);
    return 1;
  }
  if (vips_ifthenelse(t[10], t[11], in, out, "blend", TRUE, NULL)) {
    g_object_unref(base);
    return 1;
  }
  g_object_unref(base);
  return 0;
}

gboolean remove_icc_profile(VipsImage *in) {
  return vips_image_remove(in, VIPS_META_ICC_NAME);
}

int get_meta_orientation(VipsImage *in) {
  int orientation = 0;
  if (vips_image_get_typeof(in, VIPS_META_ORIENTATION) != 0) {
    vips_image_get_int(in, VIPS_META_ORIENTATION, &orientation);
  }
  return orientation;
}

// https://libvips.github.io/libvips/API/current/libvips-header.html#vips-image-get-n-pages
int get_image_n_pages(VipsImage *in) {
  int n_pages = 0;
  n_pages = vips_image_get_n_pages(in);
  return n_pages;
}

// https://www.libvips.org/API/current/libvips-header.html#vips-image-get-page-height
int get_page_height(VipsImage *in) {
  int page_height = 0;
  page_height = vips_image_get_page_height(in);
  return page_height;
}

void set_page_height(VipsImage *in, int height) {
  vips_image_set_int(in, VIPS_META_PAGE_HEIGHT, height);
}

int get_meta_loader(const VipsImage *in, const char **out) {
  return vips_image_get_string(in, VIPS_META_LOADER, out);
}

void set_image_delay(VipsImage *in, const int *array, int n) {
  return vips_image_set_array_int(in, "delay", array, n);
}

const char * get_meta_string(const VipsImage *image, const char *name) {
  const char *val;
  if (vips_image_get_typeof(image, name) != 0 && !vips_image_get_string(image, name, &val)) {
    return &val[0];
  }
  return "";
}

int remove_exif(VipsImage *in, VipsImage **out) {
  static double default_resolution = 72.0 / 25.4;

  if (vips_copy(
    in, out,
    "xres", default_resolution,
    "yres", default_resolution,
    NULL
  )) return 1;

  gchar **fields = vips_image_get_fields(in);

  for (int i = 0; fields[i] != NULL; i++) {
    gchar *name = fields[i];
    if (strcmp(name, VIPS_META_ICC_NAME) == 0) continue;
    if (strcmp(name, VIPS_META_ORIENTATION) == 0) continue;
    if (strcmp(name, VIPS_META_N_PAGES) == 0) continue;
    if (strcmp(name, VIPS_META_PAGE_HEIGHT) == 0) continue;
    if (strcmp(name, "palette-bit-depth") == 0) continue;
    vips_image_remove(*out, name);
  }
  g_strfreev(fields);
  return 0;
}
